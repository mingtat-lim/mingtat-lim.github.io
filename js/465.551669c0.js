"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[465],{4533:(e,l,t)=>{function a(e,l,t){return e?`${l} ${t}`:l}t.d(l,{y:()=>a})},9482:(e,l,t)=>{t.d(l,{n:()=>c});var a=t(587),s=t(8993);const o="barcode-db-v1",n="barcode-db",c=(0,a.nY)(o,{state:()=>({_loaded:!1,_barcodes:new Array}),getters:{barcodes:e=>{if(!e._loaded){const l=s.A.getItem(o);if(e._barcodes=null!==l?l:new Array,e._loaded=!0,null!==s.A.getItem(n)){const l=JSON.parse(s.A.getItem(n)+"");l.barCodes.forEach((l=>{e._barcodes.push({caption:l.caption,barcode:l.barCode,expended:!1})})),s.A.removeItem(n),s.A.set(o,e._barcodes)}}return e._barcodes}},actions:{save(){s.A.set(o,this._barcodes)},add(e){this._barcodes.push(e),this.save()},update(e,l){this._barcodes[l]=Object.assign({},e),this.save()},delete(e){return e>=0&&e<this._barcodes.length?(this._barcodes.splice(e,1),this.save(),!0):(console.error("Index out of range"),!1)},restore(e){this._barcodes=e,this.save()},reset(){this._barcodes=[],this.save()}}})},614:(e,l,t)=>{t.d(l,{C:()=>d});var a=t(587),s=t(8993),o=t(3537);const n="settings-db-v2",c=()=>({locale:"zh-TC",type:"barcode",systemAdmin:!1,barcodePageDebug:!1,barcodeEditPageDebug:!1,settingsPageDebug:!1,sharePageDebug:!1}),i=()=>{const{locale:e}=(0,o.s9)({useScope:"global"}),l=s.A.getItem(n),t=l||c();return e.value=t.locale,t},d=(0,a.nY)(n,{state:()=>({settings:i(),lang:(0,o.s9)({useScope:"global"})}),actions:{updateSettings(){this.settings.locale!==this.lang.locale&&(this.lang.locale=this.settings.locale),s.A.set(n,this.settings)},restore(e){this.settings=e,this.updateSettings()},reset(){this.settings=c(),this.updateSettings()}}})},2291:(e,l,t)=>{t.d(l,{A:()=>v});var a=t(1758);function s(e,l,t,s,o,n){const c=(0,a.g2)("q-toggle");return(0,a.uX)(),(0,a.Wv)(c,{modelValue:e.currentMode,"onUpdate:modelValue":[l[0]||(l[0]=l=>e.currentMode=l),e.updateMode],"aria-label":"Dark mode toggle","checked-icon":"dark_mode","true-value":"dark","unchecked-icon":"light_mode","false-value":"light",color:e.classes({colors:["primary","dark"]}),"keep-color":""},null,8,["modelValue","color","onUpdate:modelValue"])}var o=t(8734),n=t(411);const c="mode",i="light",d="dark";function r(){const e=(0,o.KR)();function l(){return localStorage.getItem(c)}function t(l){e.value=l,n.A.set(l===d),localStorage.setItem(c,l)}function s({prefix:e="",invert:l="",colors:t=["white","dark"]}={}){const a=e?`${e}-${t[0]}`:t[0],s=e?`${e}-${t[1]}`:t[1];return l?n.A.isActive?s:a:n.A.isActive?a:s}return(0,a.sV)((()=>{var e;t(null!==(e=l())&&void 0!==e?e:i)})),{currentMode:e,updateMode:t,classes:s}}const u=(0,a.pM)({name:"x-dark-mode",setup(){const{currentMode:e,updateMode:l,classes:t}=r();return{currentMode:e,updateMode:l,classes:t}}});var g=t(2807),b=t(6908),p=t(8582),m=t.n(p);const _=(0,g.A)(u,[["render",s]]),v=_;m()(u,"components",{QToggle:b.A})},1234:(e,l,t)=>{t.d(l,{A:()=>r});var a=t(1758),s=t(8790);function o(e,l,t,o,n,c){return(0,a.uX)(),(0,a.CE)("div",null,[(0,a.Lk)("h5",null,(0,s.v_)(e.title),1),(0,a.Lk)("pre",null,(0,s.v_)(c.valueString),1)])}const n={title:{required:!0,type:String},value:{required:!0}},c={name:"raw-displayer",props:n,computed:{valueString(){return JSON.stringify(this.value,null,2)}}};var i=t(2807);const d=(0,i.A)(c,[["render",o],["__scopeId","data-v-11f63c05"]]),r=d},3465:(e,l,t)=>{t.r(l),t.d(l,{default:()=>Z});var a=t(1758),s=t(8790),o=t(8734),n=t(4533),c=t(3537),i=t(2291),d=t(1234),r=t(7396),u=t(9862),g=t(4907),b=t(9482),p=t(614),m=t(587);const _=e=>((0,a.Qi)("data-v-599dcce8"),e=e(),(0,a.jt)(),e),v=_((()=>(0,a.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1))),h={class:"row q-pa-xs"},k={class:"q-pa-ms"},y={class:"q-pa-ms"},R={class:"q-pa-ms"},A={class:"q-pa-ms"},V={class:"q-pa-ms"},f={key:0,class:"row q-pa-md"},q={class:"col"},D={class:"row q-pa-md"},C={class:"col"},L={class:"row q-pa-md"},S={class:"row items-center"},F={class:"row q-pa-md"},P={key:1,class:"row q-pa-md"},w={class:"col x-v-align-middle"},x={class:"col text-right"},M={key:2,class:"q-pa-md"},E={class:"text-center"},Q={key:3,class:"row q-pa-md"},I={class:"col x-v-align-middle"},U={key:0,class:"col text-right"},O=(0,a.pM)({__name:"settingsComponent",setup(e){const{t:l}=(0,c.s9)({useScope:"global"}),t=(0,p.C)(),{settings:_}=(0,m.bP)(t),O=()=>{t.updateSettings()},X=(0,g.A)(),z=(0,b.n)(),$=(0,o.KR)(!1),T=(0,o.KR)(!1),Y=(0,o.KR)(""),K=_.value.settingsPageDebug,j=[{label:"English",value:"en-US"},{label:"中文（新加坡）",value:"zh-SG"},{label:"中文（慈济）",value:"zh-TC"}],J=[{label:"settings_type_barcode",value:"barcode"},{label:"settings_type_qrcode",value:"qrcode"}],N=()=>{K&&console.log("onBackupClick");const e=Date.now(),l=u.Ay.formatDate(e,"YYYY-MM-DD-HH-mm"),t={settings:_.value,data:z.barcodes},a=(0,r.A)(`barcodeManager-${l}.txt`,JSON.stringify(t,null,4));!0===a||console.log("Error: "+a)},G=()=>{K&&console.log("onRestoreClick"),""!==Y.value?X.dialog({title:l("dialog_title_confirmation"),message:l("dialog_message_restore"),cancel:{label:l("button_caption_cancel"),push:!0},ok:{label:l("button_caption_yes")},persistent:!0}).onOk((()=>{try{const e=JSON.parse(Y.value);t.restore(e.settings),z.restore(e.data),X.notify({type:"positive",position:"center",message:l("settings_notify_restoreSuccess")})}catch(e){X.notify({type:"negative",position:"center",message:e.message})}})).onCancel((()=>{})).onDismiss((()=>{})):X.notify({type:"negative",position:"center",message:l("settings_notify_noDataError")})},W=()=>{K&&console.log("onResetClick"),X.dialog({title:l("dialog_title_confirmation"),message:l("dialog_message_reset"),cancel:{label:l("button_caption_cancel"),push:!0},ok:{label:l("button_caption_yes")},persistent:!0}).onOk((()=>{t.reset(),X.notify({type:"positive",position:"center",message:l("settings_notify_resetSuccess")})})).onCancel((()=>{})).onDismiss((()=>{}))};return(e,t)=>{const c=(0,a.g2)("q-toggle"),r=(0,a.g2)("q-select"),u=(0,a.g2)("q-option-group"),g=(0,a.g2)("q-btn"),b=(0,a.g2)("q-input");return(0,a.uX)(),(0,a.CE)(a.FK,null,[v,(0,a.Lk)("div",h,[(0,a.Lk)("div",{class:(0,s.C4)((0,o.R1)(n.y)((0,o.R1)(_).settingsPageDebug,"col text-h3 text-center text-capitalize","bg-blue-3"))},(0,s.v_)((0,o.R1)(l)("settings_title")),3)]),(0,a.Lk)("div",k,[(0,a.bF)(c,{modelValue:(0,o.R1)(_).systemAdmin,"onUpdate:modelValue":[t[0]||(t[0]=e=>(0,o.R1)(_).systemAdmin=e),O],label:(0,o.R1)(l)("settings_toggle_label_systemAdmin"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,a.Lk)("div",y,[(0,a.bF)(c,{modelValue:(0,o.R1)(_).barcodePageDebug,"onUpdate:modelValue":[t[1]||(t[1]=e=>(0,o.R1)(_).barcodePageDebug=e),O],label:(0,o.R1)(l)("settings_barcode_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,a.Lk)("div",R,[(0,a.bF)(c,{modelValue:(0,o.R1)(_).barcodeEditPageDebug,"onUpdate:modelValue":[t[2]||(t[2]=e=>(0,o.R1)(_).barcodeEditPageDebug=e),O],label:(0,o.R1)(l)("settings_barcodeEdit_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,a.Lk)("div",A,[(0,a.bF)(c,{modelValue:(0,o.R1)(_).settingsPageDebug,"onUpdate:modelValue":[t[3]||(t[3]=e=>(0,o.R1)(_).settingsPageDebug=e),O],label:(0,o.R1)(l)("settings_settings_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,a.Lk)("div",V,[(0,a.bF)(c,{modelValue:(0,o.R1)(_).sharePageDebug,"onUpdate:modelValue":[t[4]||(t[4]=e=>(0,o.R1)(_).sharePageDebug=e),O],label:(0,o.R1)(l)("settings_share_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,o.R1)(_).settingsPageDebug?((0,a.uX)(),(0,a.CE)("div",f,[(0,a.Lk)("div",q,(0,s.v_)((0,o.R1)(l)("language"))+" -- "+(0,s.v_)((0,o.R1)(_).locale),1)])):(0,a.Q3)("",!0),(0,a.Lk)("div",D,[(0,a.Lk)("div",C,[(0,a.bF)(r,{outlined:"",modelValue:(0,o.R1)(_).locale,"onUpdate:modelValue":[t[5]||(t[5]=e=>(0,o.R1)(_).locale=e),O],options:j,"emit-value":"","map-options":"",label:(0,o.R1)(l)("settings_settings_language")},null,8,["modelValue","label"])])]),(0,a.Lk)("div",L,[(0,a.bF)(u,{inline:"",color:"primary",type:"radio",class:"q-mt-xs",options:J,modelValue:(0,o.R1)(_).type,"onUpdate:modelValue":[t[6]||(t[6]=e=>(0,o.R1)(_).type=e),O]},{label:(0,a.k6)((e=>[(0,a.Lk)("div",S,[(0,a.Lk)("span",null,(0,s.v_)((0,o.R1)(l)(e.label)),1)])])),_:1},8,["modelValue"])]),(0,a.Lk)("div",F,[(0,a.bF)(i.A,{label:(0,o.R1)(l)("settings_darkMode")},null,8,["label"])]),(0,o.R1)(_).systemAdmin?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.Lk)("div",w,[(0,a.bF)(c,{modelValue:$.value,"onUpdate:modelValue":t[7]||(t[7]=e=>$.value=e),label:(0,o.R1)(l)("settings_toggle_label_restore"),color:"green","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,a.Lk)("div",x,[(0,a.bF)(g,{push:"",color:"green",icon:"cloud_download",label:(0,o.R1)(l)("settings_button_label_backup"),size:"lg",onClick:N},null,8,["label"])])])):(0,a.Q3)("",!0),$.value&&(0,o.R1)(_).systemAdmin?((0,a.uX)(),(0,a.CE)("div",M,[(0,a.bF)(b,{"lazy-rules":"",outlined:"","bottom-slots":"",dense:"",modelValue:Y.value,"onUpdate:modelValue":t[8]||(t[8]=e=>Y.value=e),label:(0,o.R1)(l)("settings_textarea_label_jsonData"),type:"textarea"},null,8,["modelValue","label"]),(0,a.Lk)("div",E,[(0,a.bF)(g,{push:"",color:"green",icon:"cloud_upload",label:(0,o.R1)(l)("settings_button_label_restore"),size:"lg",onClick:G},null,8,["label"])])])):(0,a.Q3)("",!0),(0,o.R1)(_).systemAdmin?((0,a.uX)(),(0,a.CE)("div",Q,[(0,a.Lk)("div",I,[(0,a.bF)(c,{modelValue:T.value,"onUpdate:modelValue":t[9]||(t[9]=e=>T.value=e),label:(0,o.R1)(l)("settings_toggle_label_reset"),color:"red","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),T.value?((0,a.uX)(),(0,a.CE)("div",U,[(0,a.bF)(g,{push:"",color:"red",icon:"restart_alt",label:(0,o.R1)(l)("settings_button_label_reset"),size:"lg",onClick:W},null,8,["label"])])):(0,a.Q3)("",!0)])):(0,a.Q3)("",!0),(0,o.R1)(_).settingsPageDebug?((0,a.uX)(),(0,a.Wv)(d.A,{key:4,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,o.R1)(_),title:"db settings"},null,8,["value"])):(0,a.Q3)("",!0)],64)}}});var X=t(2807),z=t(6908),$=t(7582),T=t(9495),Y=t(1693),K=t(9270),j=t(8582),J=t.n(j);const N=(0,X.A)(O,[["__scopeId","data-v-599dcce8"]]),G=N;J()(O,"components",{QToggle:z.A,QSelect:$.A,QOptionGroup:T.A,QBtn:Y.A,QInput:K.A});const W=(0,a.pM)(Object.assign({name:"SettingsPage"},{__name:"settingsPage",setup(e){return(e,l)=>{const t=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(t,null,{default:(0,a.k6)((()=>[(0,a.bF)(G)])),_:1})}}}));var B=t(7716);const H=(0,X.A)(W,[["__scopeId","data-v-a0d54ff8"]]),Z=H;J()(W,"components",{QPage:B.A})}}]);