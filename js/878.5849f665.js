"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[878],{2875:(e,t,l)=>{function o(e,t,l){return e?`${t} ${l}`:t}l.d(t,{$:()=>o})},2620:(e,t,l)=>{l.d(t,{P:()=>s,d:()=>o});class o{constructor(e){this._settings={isAdmin:!1,globalDebug:!1,homePageDebug:!1,barCodePageDebug:!1,qrCodePageDebug:!1,profilePageDebug:!1,memberPageDebug:!1,eventsPageDebug:!1,scanCodePageDebug:!1,geolocationPageDebug:!1,settingsPageDebug:!1},this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._settings=Object.assign(Object.assign({},this._settings),t)}saveSettings(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){return this._settings}get isAdmin(){return this._settings.isAdmin}set isAdmin(e){this._settings.isAdmin=e}get globalDebug(){return this._settings.globalDebug}set globalDebug(e){this._settings.globalDebug=e}get eventsPageDebug(){return this._settings.eventsPageDebug}set eventsPageDebug(e){this._settings.eventsPageDebug=e}get barCodePageDebug(){return this._settings.barCodePageDebug}set barCodePageDebug(e){this._settings.barCodePageDebug=e}get geolocationPageDebug(){return this._settings.geolocationPageDebug}set geolocationPageDebug(e){this._settings.geolocationPageDebug=e}get homePageDebug(){return this._settings.homePageDebug}set homePageDebug(e){this._settings.homePageDebug=e}get memberPageDebug(){return this._settings.memberPageDebug}set memberPageDebug(e){this._settings.memberPageDebug=e}get profilePageDebug(){return this._settings.profilePageDebug}set profilePageDebug(e){this._settings.profilePageDebug=e}get qrCodePageDebug(){return this._settings.qrCodePageDebug}set qrCodePageDebug(e){this._settings.qrCodePageDebug=e}get scanCodePageDebug(){return this._settings.scanCodePageDebug}set scanCodePageDebug(e){this._settings.scanCodePageDebug=e}get settingsPageDebug(){return this._settings.settingsPageDebug}set settingsPageDebug(e){this._settings.settingsPageDebug=e}}class s{constructor(e){this.KEY_BARCODE_DB="barcode-db",this._state={title:"条形码数据库",barCodes:[]},this._local=e.localStorage,null===this._local.getItem(this.KEY_BARCODE_DB)&&this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.KEY_BARCODE_DB)+"");this._state=Object.assign(Object.assign({},this._state),t)}getState(){return this._state}saveData(){this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()))}get newItem(){return{caption:"",barCode:"",expanded:!1}}addBarCode(e){this._state.barCodes.push(e)}deleteBarCode(e){this._state.barCodes=[...this._state.barCodes.slice(0,e),...this._state.barCodes.slice(e+1)]}get title(){return this._state.title}get barCodes(){return this._state.barCodes}}},9878:(e,t,l)=>{l.r(t),l.d(t,{default:()=>M});var o=l(9835),s=l(499),a=l(6970),n=l(1957),i=l(2620),c=l(9302),g=l(2875),d=l(226),u=function(e,t,l,o){function s(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function n(e){try{c(o.next(e))}catch(t){a(t)}}function i(e){try{c(o["throw"](e))}catch(t){a(t)}}function c(e){e.done?l(e.value):s(e.value).then(n,i)}c((o=o.apply(e,t||[])).next())}))};const r={class:"col item-stretch"},m={class:"row items-center"},v={class:"text-h4 col-8 text-center"},p={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},b={class:"q-pa-xs"},_={key:0},h=(0,o._)("div",null,"Sample Location",-1),C=(0,o._)("div",{class:"row text-h6"},[(0,o._)("div",{class:"col-6"},"靜思堂"),(0,o._)("div",{class:"col-6"},"HYC")],-1),D=(0,o._)("div",{class:"row text-h6"},[(0,o._)("div",{class:"col-6"},"武吉巴督长青馆/230A"),(0,o._)("div",{class:"col-6"},"南洋长青馆")],-1),S=(0,o._)("div",{class:"row text-h6"},[(0,o._)("div",{class:"col-6"},"日间康复中心"),(0,o._)("div",{class:"col-6"},"Westmall")],-1),w=(0,o._)("div",{class:"row text-h6"},[(0,o._)("div",{class:"col-6"},"650249"),(0,o._)("div",{class:"col-6"},"650248")],-1),f=[h,C,D,S,w],k={key:1},U={class:"row items-center q-pa-xs q-ma-sm q-mb-md"},y={class:"row items-center"},q={class:""},P={class:"text-subtitle1"},x={class:""},V={class:"text-right q-gutter-xs self-center"},O={class:"col"},$={class:"row q-col-gutter-sm"},E={key:0},W={class:"col"},I={key:0},A={class:"col q-pa-xs"},B="events",Q=(0,o.aZ)({__name:"AddEvent",setup(e){const t=(0,c.Z)(),l=new i.d(t),h=l.globalDebug||l.eventsPageDebug,C=l.isAdmin,D=(0,s.iH)(Array());if(null!==t.localStorage.getItem(B)){h&&console.log("parse",t.localStorage.getItem(B));const e=JSON.parse(t.localStorage.getItem(B)+"");e.forEach(((e,t)=>{if(e.expanded=!1,e.showQrCode=!1,D.value.push(e),0===t){const t={title:"精进日交通安排",message:"集合时间及地点和巴士车站",options:["无需安排交通","5:30am 武吉甘柏地铁站","5:30am 巴士站, Opp 461C, 武吉巴督西大道 6","5:30am 巴士站, Opp 451A, 武吉巴督西大道 6","5:40am West Mall 交通圈","5:45am 武吉巴督 230A, 武吉巴督 21 街","5:45am 巴士站, Opp Blk 19, Jln Jurong Kechil"]};e.option=t}if(3===t){const t={title:"慈善关怀曰",message:"请选择日期以及您是否是司机菩萨",options:["2023/10/08(周日)","2023/10/08(周日) - 司机菩萨","2023/10/07(周六)","2023/10/07(周六) - 司机菩萨"]};e.option=t}}))}let S=(0,s.iH)("list");const w=(0,s.iH)(Q());function Q(){return{eventId:"",event:"",eventDate:"",startTime:"",endTime:"",location:"",lat:-1,lon:-1,option:void 0,isSignup:!1,isRegister:!1,expanded:!1}}function T(e){var t;h&&console.log("showQrCodeHandler",e);const l=D.value[e];l.showQrCode=null!==(t=l.showQrCode)&&void 0!==t&&t;const o=!l.showQrCode;D.value.forEach((e=>e.showQrCode=!1)),l.showQrCode=o}function K(e){h&&console.log("formatQrCodeData",e);const t=D.value[e];let l=1.373556135196938,o=103.93943767472784;"HYC"===t.location&&(l=1.4276444675530362,o=103.83848934404277),"武吉巴督长青馆"!==t.location&&"230A"!==t.location||(l=1.3481823372243324,o=103.75576975938374),"南洋长青馆"===t.location&&(l=1.3446645882476975,o=103.69680124179816),"日间康复中心"===t.location&&(l=1.3503459503023565,o=103.72980992869707),"650249"===t.location&&(l=1.3516169498106558,o=103.75655092869707),"650248"===t.location&&(l=1.3511850465510906,o=103.75654775938382),"Westmall"===t.location&&(l=1.3503783365306345,o=103.74919275938383);const s={event:decodeURIComponent(t.event),eventId:t.eventId,location:t.location,lat:l,lon:o};return JSON.stringify(s)}function j(e,l){var o,s;h&&console.log("signupHandler",e,l);const a=D.value[e],n=H(a);n?l?t.dialog({title:null===(o=a.option)||void 0===o?void 0:o.title,message:null===(s=a.option)||void 0===s?void 0:s.message,options:{type:n.type,model:n.model,items:n.items},cancel:!0,persistent:!0}).onOk((e=>{var l;h&&console.log(">>>> OK, received",e),a.isSignup=!0,a.signupOption=null===(l=a.option)||void 0===l?void 0:l.options[e],z(),t.notify({message:`报名成功! ${a.event}`,color:"green-6"})})).onCancel((()=>{h&&console.log(">>>> Cancel"),t.notify({message:`报名不成功! ${a.event}`,color:"red-6"})})).onDismiss((()=>{h&&console.log("I am triggered on both OK and Cancel")})):(h&&console.log("退出报名",e,l),t.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${a.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{h&&console.log("OK"),a.isSignup=l,a.signupOption=void 0,z(),t.notify({message:`退出活动成功! ${a.event}`,color:"red",icon:"warning"})})).onCancel((()=>{h&&console.log("Cancel")})).onDismiss((()=>{h&&console.log("I am triggered on both OK and Cancel")}))):l?(a.isSignup=l,z(),t.notify({message:`报名成功! ${a.event}`,color:"green-6"})):t.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${a.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{h&&console.log("OK"),a.isSignup=l,a.signupOption=void 0,z(),t.notify({message:`退出活动成功! ${a.event}`,color:"red",icon:"warning"})})).onCancel((()=>{h&&console.log("Cancel")})).onDismiss((()=>{h&&console.log("I am triggered on both OK and Cancel")}))}function H(e){if(e.option){const t={type:"radio",model:"0",items:[]};return e.option.options.forEach(((e,l)=>{var o;null===(o=t.items)||void 0===o||o.push({label:e,value:l.toString()})})),t}}function N(e){h&&console.log("selectHandler",e),w.value=D.value[e],S.value="edit"}function Y(){h&&console.log("updateHandler"),z(),S.value="list"}function Z(){h&&console.log("cancelHandler"),S.value="list"}function J(e){h&&console.log("showBarcode");const t=!e.expanded;D.value.forEach((e=>e.expanded=!1)),e.expanded=t}function F(e){h&&console.log("deleteHandler",e),t.dialog({title:"Confirm",message:`Are you sure you want to delete the selected row (id: ${D.value[e].event})?`,cancel:!0,persistent:!0}).onOk((()=>u(this,void 0,void 0,(function*(){D.value=[...D.value.slice(0,e),...D.value.slice(e+1)],z(),t.notify("Record deleted")}))))}function R(){w.value=Q(),S.value="add"}function L(){D.value.push(w.value),z(),S.value="list"}function z(){h&&console.log("saveData"),-1===w.value.lat&&("靜思堂"===w.value.location&&(w.value.lat=1.3486891,w.value.lon=103.7471532),"福慧中心"===w.value.location&&(w.value.lat=1.3497756,w.value.lon=103.7553429)),t.localStorage.set(B,JSON.stringify(D.value))}return(e,t)=>{const l=(0,o.up)("q-btn"),i=(0,o.up)("q-input"),c=(0,o.up)("q-icon"),u=(0,o.up)("q-card-section"),B=(0,o.up)("q-chip"),Q=(0,o.up)("q-space"),H=(0,o.up)("q-card-actions"),z=(0,o.up)("q-slide-transition"),G=(0,o.up)("q-card"),M=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(M,{class:"q-pa-md"},{default:(0,o.w5)((()=>[(0,o._)("div",r,[["add","edit"].includes((0,s.SU)(S))?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"","bg-blue-2"))},[(0,o._)("div",m,[(0,o._)("div",v,(0,a.zw)("add"===(0,s.SU)(S)?"Add New":"Edit"),1),(0,o._)("div",p,["add"===(0,s.SU)(S)?((0,o.wg)(),(0,o.j4)(l,{key:0,icon:"save",color:"green",round:"",onClick:L})):(0,o.kq)("",!0),"edit"===(0,s.SU)(S)?((0,o.wg)(),(0,o.j4)(l,{key:1,icon:"update",color:"green",round:"",onClick:Y})):(0,o.kq)("",!0),["add","edit"].includes((0,s.SU)(S))?((0,o.wg)(),(0,o.j4)(l,{key:2,icon:"cancel",color:"green",round:"",onClick:Z})):(0,o.kq)("",!0)])]),(0,o._)("div",b,[(0,o.Wm)(i,{modelValue:w.value.eventId,"onUpdate:modelValue":t[0]||(t[0]=e=>w.value.eventId=e),label:"Event Id",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o.Wm)(i,{modelValue:w.value.event,"onUpdate:modelValue":t[1]||(t[1]=e=>w.value.event=e),label:"Event Name",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o.Wm)(i,{modelValue:w.value.eventDate,"onUpdate:modelValue":t[2]||(t[2]=e=>w.value.eventDate=e),label:"Date",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o._)("div",{class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"row q-col-gutter-sm","bg-yellow-2"))},[(0,o.Wm)(i,{modelValue:w.value.startTime,"onUpdate:modelValue":t[3]||(t[3]=e=>w.value.startTime=e),label:"Start Time",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"]),(0,o.Wm)(i,{modelValue:w.value.endTime,"onUpdate:modelValue":t[4]||(t[4]=e=>w.value.endTime=e),label:"End Time",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"])],2),(0,o.Wm)(i,{modelValue:w.value.location,"onUpdate:modelValue":t[5]||(t[5]=e=>w.value.location=e),label:"Location",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o._)("div",{class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"row q-col-gutter-sm","bg-yellow-2"))},[(0,o.Wm)(i,{modelValue:w.value.lat,"onUpdate:modelValue":t[6]||(t[6]=e=>w.value.lat=e),label:"Latitude",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"]),(0,o.Wm)(i,{modelValue:w.value.lon,"onUpdate:modelValue":t[7]||(t[7]=e=>w.value.lon=e),label:"Longitude",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"])],2),(0,s.SU)(h)?((0,o.wg)(),(0,o.iD)("div",_,f)):(0,o.kq)("",!0)])],2)):(0,o.kq)("",!0),null!==D.value&&"list"===(0,s.SU)(S)?((0,o.wg)(),(0,o.iD)("div",k,[(0,o._)("div",U,[(0,o._)("div",{class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col text-h4 text-center","bg-green-2"))},"慈济活动",2),(0,s.SU)(C)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"text-h4 text-right q-gutter-xs","bg-red-4")),style:{"min-width":"50px","max-width":"50px"}},[(0,o.Wm)(l,{icon:"add",color:"green",round:"",onClick:R})],2)):(0,o.kq)("",!0)]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(D.value,((e,t)=>((0,o.wg)(),(0,o.j4)(G,{class:"q-pa-xs q-ma-sm q-mb-md",key:t},{default:(0,o.w5)((()=>[(0,o.Wm)(u,{class:"row text-h5 q-pa-none"},{default:(0,o.w5)((()=>[(0,o._)("div",{class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col","bg-blue-2"))},[(0,o._)("div",y,[e.isSignup?((0,o.wg)(),(0,o.j4)(c,{key:0,name:"check_circle",color:"green",class:""})):(0,o.kq)("",!0),(0,o._)("div",q,(0,a.zw)(e.event),1)]),(0,o._)("div",P,(0,a.zw)(e.eventDate),1)],2),(0,s.SU)(C)?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col text-right q-gutter-xs self-center","bg-purple-2")),style:{"min-width":"100px","max-width":"100px"}},[(0,o.Wm)(l,{icon:"edit",color:"green",round:"",onClick:e=>N(t)},null,8,["onClick"]),(0,o.Wm)(l,{icon:"delete",color:"green",round:"",onClick:e=>F(t)},null,8,["onClick"])],2)):(0,o.kq)("",!0)])),_:2},1024),(0,o.Wm)(H,{class:"row q-pa-none text-subtitle2"},{default:(0,o.w5)((()=>[e.isSignup?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(B,{key:0,clickable:"",color:"green","text-color":"white",onClick:e=>j(t,!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("报名")])),_:2},1032,["onClick"])),e.isSignup?((0,o.wg)(),(0,o.j4)(B,{key:1,clickable:"",color:"red","text-color":"white",onClick:e=>j(t,!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("退出")])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,s.SU)(C)?((0,o.wg)(),(0,o.j4)(B,{key:2,clickable:"",color:"blue","text-color":"white",onClick:e=>T(t)},{default:(0,o.w5)((()=>[(0,o.Uk)("活动签到 QR")])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(Q),(0,o._)("div",x,(0,a.zw)(e.expanded?"隐藏":"显示")+"资料",1),(0,o._)("div",V,[(0,o.Wm)(l,{color:"green",flat:"",dense:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:t=>J(e)},null,8,["icon","onClick"])])])),_:2},1024),(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",O,[(0,o._)("div",null,[(0,o.Wm)(i,{modelValue:e.location,"onUpdate:modelValue":t=>e.location=t,label:"Location",readonly:"",dense:"",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"])]),(0,o._)("div",$,[(0,o.Wm)(i,{modelValue:e.startTime,"onUpdate:modelValue":t=>e.startTime=t,label:"Start Time",readonly:"",dense:"",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),(0,o.Wm)(i,{modelValue:e.endTime,"onUpdate:modelValue":t=>e.endTime=t,label:"End Time",readonly:"",dense:"",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"])]),e.signupOption?((0,o.wg)(),(0,o.iD)("div",E,[(0,o.Wm)(i,{modelValue:e.signupOption,"onUpdate:modelValue":t=>e.signupOption=t,label:"Option",readonly:"",dense:"",class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"])])):(0,o.kq)("",!0)],512),[[n.F8,e.expanded]])])),_:2},1024),(0,o.Wm)(z,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",null,[(0,o._)("div",W,[(0,o._)("div",{class:(0,a.C_)((0,s.SU)(g.$)((0,s.SU)(h),"text-center","bg-yellow-2"))},[(0,o.Wm)((0,s.SU)(d.ZP),{value:K(t),type:"image/png",color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])],512),[[n.F8,e.showQrCode]])])),_:2},1024)])),_:2},1024)))),128)),(0,s.SU)(h)?((0,o.wg)(),(0,o.iD)("div",I,[(0,o._)("pre",A,(0,a.zw)(JSON.stringify(D.value,null,4)),1)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])])),_:1})}}});var T=l(9885),K=l(4455),j=l(7471),H=l(4458),N=l(3190),Y=l(2857),Z=l(136),J=l(1821),F=l(7691),R=l(9003),L=l(9984),z=l.n(L);const G=Q,M=G;z()(Q,"components",{QPage:T.Z,QBtn:K.Z,QInput:j.Z,QCard:H.Z,QCardSection:N.Z,QIcon:Y.Z,QSpace:Z.Z,QCardActions:J.Z,QChip:F.Z,QSlideTransition:R.Z})}}]);