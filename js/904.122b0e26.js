"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[904],{4484:(e,l,a)=>{a.r(l),a.d(l,{default:()=>ne});var t=a(1347),o=a(7763),s=a(4187),n=a(8677),i=a(2291),d=a(7875),c=a(8234),u=a(1497),g=a(7662),r=a(3022),m=a(5887),b=a(7047),p=a(6305);const _={class:"row q-pa-xs"},v={class:"q-pa-ms"},k={class:"q-pa-ms"},h={class:"q-pa-ms"},R={class:"q-pa-ms"},y={class:"q-pa-ms"},V={class:"q-pa-ms"},q={key:0,class:"row q-pa-md"},f={class:"col"},C={class:"row q-pa-md"},S={class:"col"},F={class:"row q-pa-md"},L={class:"row items-center"},T={class:"row q-pa-md"},D={class:"row q-pa-md"},A={class:"col"},w={class:"row q-pa-md"},I={class:"col"},P={class:"row q-pa-md"},U={class:"col"},x={key:1,class:"row q-pa-md"},E={class:"col x-v-align-middle"},Q={class:"col text-right"},z={key:2,class:"q-pa-md"},M={class:"text-center"},X={key:3,class:"row q-pa-md"},O={class:"col x-v-align-middle"},B={key:0,class:"col text-right"},K={key:4,class:"row q-pa-md"},N={class:"q-pa-ms"},Y=(0,t.pM)({__name:"settingsComponent",setup(e){const{t:l}=(0,i.s9)({useScope:"global"}),a=(0,b.C)(),{settings:Y}=(0,p.bP)(a),G=()=>{a.updateSettings()},j=()=>Number.isInteger(Y.value.dragTimeoutInSeconds)?Y.value.dragTimeoutInSeconds<5?(J.notify({type:"negative",position:"center",message:l("settings_notify_dragTimeout_tooSmall")}),void(Y.value.dragTimeoutInSeconds=5)):void a.updateSettings():(J.notify({type:"negative",position:"center",message:l("settings_notify_dragTimeout_notInteger")}),void(Y.value.dragTimeoutInSeconds=5)),H=()=>Number.isInteger(Y.value.qrCodeTimeoutInSeconds)?Y.value.qrCodeTimeoutInSeconds<10?(J.notify({type:"negative",position:"center",message:l("settings_notify_qrCodeTimeout_tooSmall")}),void(Y.value.qrCodeTimeoutInSeconds=10)):void a.updateSettings():(J.notify({type:"negative",position:"center",message:l("settings_notify_qrCodeTimeout_notInteger")}),void(Y.value.qrCodeTimeoutInSeconds=10)),J=(0,r.A)(),W=(0,m.n)(),$=(0,s.KR)(!1),Z=(0,s.KR)(!1),ee=(0,s.KR)(""),le=Y.value.settingsPageDebug,ae=[{label:"English (Tzu Chi)",value:"en-US"},{label:"中文（新加坡）",value:"zh-SG"},{label:"中文（慈济）",value:"zh-TC"}],te=[{label:"settings_type_barcode",value:"barcode"},{label:"settings_type_qrcode",value:"qrcode"}],oe=[{label:l("menu_homePage"),value:"/home"},{label:l("menu_barcode"),value:"/barcode"},{label:l("menu_title_share"),value:"/share"},{label:l("menu_title_events"),value:"/events"}],se=()=>{le&&console.log("onBackupClick");const e=Date.now(),l=g.Ay.formatDate(e,"YYYY-MM-DD-HH-mm"),a={settings:Y.value,data:W.barcodes},t="\ufeff"+JSON.stringify(a,null,4),o=(0,u.A)(`barcodeManager-${l}.txt`,t,{encoding:"utf-8",mimeType:"application/json;charset=utf-8;"});!0===o||console.log("Error: "+o)},ne=()=>{le&&console.log("onRestoreClick"),""!==ee.value?J.dialog({title:l("dialog_title_confirmation"),message:l("dialog_message_restore"),cancel:{label:l("button_caption_cancel"),push:!0},ok:{label:l("button_caption_yes")},persistent:!0}).onOk((()=>{try{const e=JSON.parse(ee.value);a.restore(e.settings),W.restore(e.data),J.notify({type:"positive",position:"center",message:l("settings_notify_restoreSuccess")})}catch(e){J.notify({type:"negative",position:"center",message:e.message})}})).onCancel((()=>{})).onDismiss((()=>{})):J.notify({type:"negative",position:"center",message:l("settings_notify_noDataError")})},ie=()=>{le&&console.log("onResetClick"),J.dialog({title:l("dialog_title_confirmation"),message:l("dialog_message_reset"),cancel:{label:l("button_caption_cancel"),push:!0},ok:{label:l("button_caption_yes")},persistent:!0}).onOk((()=>{a.reset(),W.reset(),J.notify({type:"positive",position:"center",message:l("settings_notify_resetSuccess")})})).onCancel((()=>{})).onDismiss((()=>{}))};return(e,a)=>{const i=(0,t.g2)("q-toggle"),u=(0,t.g2)("q-select"),g=(0,t.g2)("q-option-group"),r=(0,t.g2)("q-input"),m=(0,t.g2)("q-btn");return(0,t.uX)(),(0,t.CE)(t.FK,null,[a[15]||(a[15]=(0,t.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1)),(0,t.Lk)("div",_,[(0,t.Lk)("div",{class:(0,o.C4)((0,s.R1)(n.y)((0,s.R1)(Y).settingsPageDebug,"col text-h3 text-center text-capitalize","bg-blue-3"))},(0,o.v_)((0,s.R1)(l)("settings_title")),3)]),(0,t.Lk)("div",v,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).systemAdmin,"onUpdate:modelValue":[a[0]||(a[0]=e=>(0,s.R1)(Y).systemAdmin=e),G],label:(0,s.R1)(l)("settings_toggle_label_systemAdmin"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",k,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).barcodePageDebug,"onUpdate:modelValue":[a[1]||(a[1]=e=>(0,s.R1)(Y).barcodePageDebug=e),G],label:(0,s.R1)(l)("settings_barcode_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",h,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).barcodeEditPageDebug,"onUpdate:modelValue":[a[2]||(a[2]=e=>(0,s.R1)(Y).barcodeEditPageDebug=e),G],label:(0,s.R1)(l)("settings_barcodeEdit_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",R,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).settingsPageDebug,"onUpdate:modelValue":[a[3]||(a[3]=e=>(0,s.R1)(Y).settingsPageDebug=e),G],label:(0,s.R1)(l)("settings_settings_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",y,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).homePageDebug,"onUpdate:modelValue":[a[4]||(a[4]=e=>(0,s.R1)(Y).homePageDebug=e),G],label:(0,s.R1)(l)("settings_home_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",V,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).sharePageDebug,"onUpdate:modelValue":[a[5]||(a[5]=e=>(0,s.R1)(Y).sharePageDebug=e),G],label:(0,s.R1)(l)("settings_share_debugFlag"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,s.R1)(Y).settingsPageDebug?((0,t.uX)(),(0,t.CE)("div",q,[(0,t.Lk)("div",f,(0,o.v_)((0,s.R1)(l)("language"))+" -- "+(0,o.v_)((0,s.R1)(Y).locale),1)])):(0,t.Q3)("",!0),(0,t.Lk)("div",C,[(0,t.Lk)("div",S,[(0,t.bF)(u,{outlined:"",modelValue:(0,s.R1)(Y).locale,"onUpdate:modelValue":[a[6]||(a[6]=e=>(0,s.R1)(Y).locale=e),G],options:ae,"emit-value":"","map-options":"",label:(0,s.R1)(l)("settings_settings_language")},null,8,["modelValue","label"])])]),(0,t.Lk)("div",F,[(0,t.bF)(g,{inline:"",color:"primary",type:"radio",class:"q-mt-xs",options:te,modelValue:(0,s.R1)(Y).type,"onUpdate:modelValue":[a[7]||(a[7]=e=>(0,s.R1)(Y).type=e),G]},{label:(0,t.k6)((e=>[(0,t.Lk)("div",L,[(0,t.Lk)("span",null,(0,o.v_)((0,s.R1)(l)(e.label)),1)])])),_:1},8,["modelValue"])]),(0,t.Lk)("div",T,[(0,t.bF)(d.A,{label:(0,s.R1)(l)("settings_darkMode")},null,8,["label"])]),(0,t.Lk)("div",D,[(0,t.Lk)("div",A,[(0,t.bF)(u,{outlined:"",modelValue:(0,s.R1)(Y).defaultTab,"onUpdate:modelValue":[a[8]||(a[8]=e=>(0,s.R1)(Y).defaultTab=e),G],options:oe,"emit-value":"","map-options":"",label:(0,s.R1)(l)("settings_default_tab")},null,8,["modelValue","label"])])]),(0,t.Lk)("div",w,[(0,t.Lk)("div",I,[(0,t.bF)(r,{outlined:"",modelValue:(0,s.R1)(Y).qrCodeTimeoutInSeconds,"onUpdate:modelValue":[a[9]||(a[9]=e=>(0,s.R1)(Y).qrCodeTimeoutInSeconds=e),H],modelModifiers:{number:!0},type:"number",label:(0,s.R1)(l)("settings_qrcode_timeout")},null,8,["modelValue","label"])])]),(0,t.Lk)("div",P,[(0,t.Lk)("div",U,[(0,t.bF)(r,{outlined:"",modelValue:(0,s.R1)(Y).dragTimeoutInSeconds,"onUpdate:modelValue":[a[10]||(a[10]=e=>(0,s.R1)(Y).dragTimeoutInSeconds=e),j],modelModifiers:{number:!0},type:"number",label:(0,s.R1)(l)("settings_drag_timeout")},null,8,["modelValue","label"])])]),(0,s.R1)(Y).systemAdmin?((0,t.uX)(),(0,t.CE)("div",x,[(0,t.Lk)("div",E,[(0,t.bF)(i,{modelValue:$.value,"onUpdate:modelValue":a[11]||(a[11]=e=>$.value=e),label:(0,s.R1)(l)("settings_toggle_label_restore"),color:"green","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),(0,t.Lk)("div",Q,[(0,t.bF)(m,{push:"",color:"green",icon:"cloud_download",label:(0,s.R1)(l)("settings_button_label_backup"),size:"lg",onClick:se},null,8,["label"])])])):(0,t.Q3)("",!0),$.value&&(0,s.R1)(Y).systemAdmin?((0,t.uX)(),(0,t.CE)("div",z,[(0,t.bF)(r,{"lazy-rules":"",outlined:"","bottom-slots":"",dense:"",modelValue:ee.value,"onUpdate:modelValue":a[12]||(a[12]=e=>ee.value=e),label:(0,s.R1)(l)("settings_textarea_label_jsonData"),type:"textarea"},null,8,["modelValue","label"]),(0,t.Lk)("div",M,[(0,t.bF)(m,{push:"",color:"green",icon:"cloud_upload",label:(0,s.R1)(l)("settings_button_label_restore"),size:"lg",onClick:ne},null,8,["label"])])])):(0,t.Q3)("",!0),(0,s.R1)(Y).systemAdmin?((0,t.uX)(),(0,t.CE)("div",X,[(0,t.Lk)("div",O,[(0,t.bF)(i,{modelValue:Z.value,"onUpdate:modelValue":a[13]||(a[13]=e=>Z.value=e),label:(0,s.R1)(l)("settings_toggle_label_reset"),color:"red","checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])]),Z.value?((0,t.uX)(),(0,t.CE)("div",B,[(0,t.bF)(m,{push:"",color:"red",icon:"restart_alt",label:(0,s.R1)(l)("settings_button_label_reset"),size:"lg",onClick:ie},null,8,["label"])])):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0),(0,s.R1)(Y).systemAdmin?((0,t.uX)(),(0,t.CE)("div",K,[(0,t.Lk)("div",N,[(0,t.bF)(i,{modelValue:(0,s.R1)(Y).allowSharedBarcodeFlag,"onUpdate:modelValue":[a[14]||(a[14]=e=>(0,s.R1)(Y).allowSharedBarcodeFlag=e),G],label:(0,s.R1)(l)("settings_toggle_label_allowSharedBarcode"),"checked-icon":"check","unchecked-icon":"clear"},null,8,["modelValue","label"])])])):(0,t.Q3)("",!0),(0,s.R1)(Y).settingsPageDebug?((0,t.uX)(),(0,t.Wv)(c.A,{key:5,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,s.R1)(Y),title:"db settings"},null,8,["value"])):(0,t.Q3)("",!0)],64)}}});var G=a(2968),j=a(5725),H=a(6839),J=a(4552),W=a(6067),$=a(9039),Z=a(272),ee=a.n(Z);const le=(0,G.A)(Y,[["__scopeId","data-v-3c3081c2"]]),ae=le;ee()(Y,"components",{QToggle:j.A,QSelect:H.A,QOptionGroup:J.A,QInput:W.A,QBtn:$.A});const te=(0,t.pM)({name:"SettingsPage",__name:"settingsPage",setup(e){return(e,l)=>{const a=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(a,null,{default:(0,t.k6)((()=>[(0,t.bF)(ae)])),_:1})}}});var oe=a(5013);const se=(0,G.A)(te,[["__scopeId","data-v-a0d54ff8"]]),ne=se;ee()(te,"components",{QPage:oe.A})}}]);