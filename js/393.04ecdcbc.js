"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[393],{2875:(e,t,s)=>{function a(e,t,s){return e?`${t} ${s}`:t}function i(e,t,s,a){return e%2===0?`${t} ${s}`:`${t} ${a}`}s.d(t,{$:()=>a,r:()=>i})},2620:(e,t,s)=>{s.d(t,{HG:()=>n,Px:()=>i,de:()=>a,xB:()=>o});class a{constructor(e){this._settings={isAdmin:!1,globalDebug:!1,homePageDebug:!1,barCodePageDebug:!1,qrCodePageDebug:!1,profilePageDebug:!1,memberPageDebug:!1,eventsPageDebug:!1,scanCodePageDebug:!1,geolocationPageDebug:!1,settingsPageDebug:!1},this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._settings=Object.assign(Object.assign({},this._settings),t)}saveSettings(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){return this._settings}get isAdmin(){return this._settings.isAdmin}set isAdmin(e){this._settings.isAdmin=e}get globalDebug(){return this._settings.globalDebug}set globalDebug(e){this._settings.globalDebug=e}get eventsPageDebug(){return this._settings.eventsPageDebug}set eventsPageDebug(e){this._settings.eventsPageDebug=e}get barCodePageDebug(){return this._settings.barCodePageDebug}set barCodePageDebug(e){this._settings.barCodePageDebug=e}get geolocationPageDebug(){return this._settings.geolocationPageDebug}set geolocationPageDebug(e){this._settings.geolocationPageDebug=e}get homePageDebug(){return this._settings.homePageDebug}set homePageDebug(e){this._settings.homePageDebug=e}get memberPageDebug(){return this._settings.memberPageDebug}set memberPageDebug(e){this._settings.memberPageDebug=e}get profilePageDebug(){return this._settings.profilePageDebug}set profilePageDebug(e){this._settings.profilePageDebug=e}get qrCodePageDebug(){return this._settings.qrCodePageDebug}set qrCodePageDebug(e){this._settings.qrCodePageDebug=e}get scanCodePageDebug(){return this._settings.scanCodePageDebug}set scanCodePageDebug(e){this._settings.scanCodePageDebug=e}get settingsPageDebug(){return this._settings.settingsPageDebug}set settingsPageDebug(e){this._settings.settingsPageDebug=e}}class i{constructor(e){this.KEY_BARCODE_DB="barcode-db",this._state={title:"条形码数据库",barCodes:[]},this._local=e.localStorage,null===this._local.getItem(this.KEY_BARCODE_DB)&&this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.KEY_BARCODE_DB)+"");this._state=Object.assign(Object.assign({},this._state),t)}getState(){return this._state}saveData(){this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()))}get newItem(){return{caption:"",barCode:"",expanded:!1}}addBarCode(e){this._state.barCodes.push(e)}deleteBarCode(e){this._state.barCodes=[...this._state.barCodes.slice(0,e),...this._state.barCodes.slice(e+1)]}get title(){return this._state.title}get barCodes(){return this._state.barCodes}}class n{constructor(){this.title="功能组",this.checkinOptions=[]}addFunctionGroup(){const e={groupName:"",slots:[{slot:"",selected:!1},{slot:"",selected:!1},{slot:"",selected:!1}]};return this.checkinOptions.push(e),e}}class o{constructor(e){this.KEY_BARCODE_DB="events",this._state={events:[]},this._local=e.localStorage,null===this._local.getItem(this.KEY_BARCODE_DB)&&this._local.set(this.KEY_BARCODE_DB,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.KEY_BARCODE_DB)+"");this._state.events=t}getState(){return this._state}get stateString(){return JSON.stringify(this.getState())}restoreData(e){const t=JSON.parse(e);this._state=t}resetData(){this._state.events=[]}saveData(){this._local.set(this.KEY_BARCODE_DB,this.stateString)}get newItem(){return{eventId:"",event:"",eventDate:"",startTime:"",endTime:"",location:"",lat:-1,lon:-1,signupOptions:void 0,checkinOptions:void 0,isSignup:!1,isRegister:!1,expanded:!1}}addBarCode(e){this._state.events.push(e)}deleteBarCode(e){this._state.events=[...this._state.events.slice(0,e),...this._state.events.slice(e+1)]}get events(){return this._state.events}getItemById(e){return this.events.find((t=>t.eventId===e))}}},1435:(e,t,s)=>{s.d(t,{Z:()=>g});var a=s(9835),i=s(1265);const n={name:"BarcodeGenerator",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:function(e){return-1!==["canvas","svg","img"].indexOf(e)}}},render(){return(0,a.h)(this.elementTag,{id:["barcodegen"]})},mounted:function(){o.call(this)}};function o(){this.value;var e={format:this.format,width:this.width,height:this.height,displayValue:this.displayValue,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,flat:this.flat,ean128:this.ean128,valid:function(e){e},elementTag:this.elementTag};l(e),i(this.$el,this.value,e)}function l(e){Object.keys(e).forEach((t=>void 0===e[t]?delete e[t]:{}))}const r=n,g=r},2393:(e,t,s)=>{s.r(t),s.d(t,{default:()=>R});var a=s(9835),i=s(499),n=s(6970),o=s(1957),l=s(1435),r=s(2620),g=s(2875),u=s(9302),d=s(3130),c=s.n(d),h=function(e,t,s,a){function i(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function o(e){try{r(a.next(e))}catch(t){n(t)}}function l(e){try{r(a["throw"](e))}catch(t){n(t)}}function r(e){e.done?s(e.value):i(e.value).then(o,l)}r((a=a.apply(e,t||[])).next())}))};const b={class:"col item-stretch"},_={class:"q-pa-xs"},m={key:1,xclass:"q-pt-md"},v={class:"row items-center q-pa-xs q-ma-sm q-mb-md"},p={class:""},S={class:"row items-center"},D={class:""},C={class:"text-subtitle1"},f={class:""},w={class:"text-right q-gutter-xs self-center"},x={key:0},P={class:"col q-pa-xs"},B=(0,a.aZ)({__name:"BarCodev2",setup(e){const t=(0,u.Z)(),s=new r.de(t),d=(0,i.iH)(new r.Px(t));(0,a.Jd)((()=>{B&&console.log("onBeforeUnmount"),d.value.saveData()}));const B=s.globalDebug||s.barCodePageDebug;let q=(0,i.iH)("list");const k=(0,i.iH)(d.value.newItem);let U=-1;const y=(0,i.iH)(""),O=(0,i.iH)("");function E(e){B&&console.log("selectHandler",e),k.value=d.value.barCodes[e],U=e,q.value="edit"}function N(){B&&console.log("updateHandler"),d.value.saveData(),q.value="list"}function A(){B&&console.log("cancelHandler"),q.value="list"}function $(e){B&&console.log("showBarcode");const t=!e.expanded;d.value.barCodes.forEach((e=>e.expanded=!1)),e.expanded=t}function W(e){B&&console.log("deleteHandler",e),t.dialog({title:"Confirm",message:`Are you sure you want to delete the selected row (id: ${d.value.barCodes[e].caption})?`,cancel:!0,persistent:!0}).onOk((()=>h(this,void 0,void 0,(function*(){d.value.deleteBarCode(e),d.value.saveData(),q.value="list",t.notify("Record deleted")}))))}function I(){k.value=d.value.newItem,U=-1,q.value="add"}function K(){d.value.addBarCode(k.value),q.value="list"}return d.value.barCodes.length>0&&$(d.value.barCodes[0]),(e,t)=>{const s=(0,a.up)("q-btn"),r=(0,a.up)("q-input"),u=(0,a.up)("q-card-section"),h=(0,a.up)("q-space"),T=(0,a.up)("q-card-actions"),R=(0,a.up)("q-separator"),V=(0,a.up)("q-slide-transition"),Y=(0,a.up)("q-card"),Z=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(Z,{class:"q-pa-md"},{default:(0,a.w5)((()=>[(0,a._)("div",b,[["add","edit"].includes((0,i.SU)(q))?((0,a.wg)(),(0,a.iD)("div",{key:0,class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"","bg-blue-2"))},[(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"row items-center","bg-red-2"))},[(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"text-h4 text-center col","bg-yellow-2"))},(0,n.zw)("add"===(0,i.SU)(q)?"Add New":"Edit"),3),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"text-h4 q-pa-sm q-gutter-xs col-md-auto","bg-green-2"))},["add"===(0,i.SU)(q)?((0,a.wg)(),(0,a.j4)(s,{key:0,icon:"save",color:"green",round:"",onClick:K})):(0,a.kq)("",!0),"edit"===(0,i.SU)(q)?((0,a.wg)(),(0,a.j4)(s,{key:1,icon:"delete",color:"green",round:"",onClick:t[0]||(t[0]=e=>W((0,i.SU)(U)))})):(0,a.kq)("",!0),"edit"===(0,i.SU)(q)?((0,a.wg)(),(0,a.j4)(s,{key:2,icon:"update",color:"green",round:"",onClick:N})):(0,a.kq)("",!0),["add","edit"].includes((0,i.SU)(q))?((0,a.wg)(),(0,a.j4)(s,{key:3,icon:"cancel",color:"green",round:"",onClick:A})):(0,a.kq)("",!0)],2)],2),(0,a._)("div",_,[(0,a.Wm)(r,{modelValue:k.value.caption,"onUpdate:modelValue":t[1]||(t[1]=e=>k.value.caption=e),label:"Caption",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,a.Wm)(r,{modelValue:k.value.barCode,"onUpdate:modelValue":t[2]||(t[2]=e=>k.value.barCode=e),label:"BarCode",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"row items-center","bg-red-2"))},[(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"text-h4 text-center col","bg-yellow-2"))},[(0,a.Wm)(r,{modelValue:y.value,"onUpdate:modelValue":t[3]||(t[3]=e=>y.value=e),label:"Tag"},null,8,["modelValue"])],2),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"","bg-green-2"))},[(0,a.Wm)(s,{icon:"add",color:"green",round:"",dense:""})],2)],2),(0,a._)("div",null,[(0,a.Wm)(r,{modelValue:O.value,"onUpdate:modelValue":t[4]||(t[4]=e=>O.value=e),filled:"",autogrow:"",label:"Notes"},null,8,["modelValue"])])])],2)):(0,a.kq)("",!0),null!==d.value.barCodes&&"list"===(0,i.SU)(q)?((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",v,[(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"col text-h4 text-center","bg-green-2"))},(0,n.zw)(d.value.title),3),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"text-h4 text-right q-gutter-xs","bg-red-4")),style:{"min-width":"50px","max-width":"50px"}},[(0,a.Wm)(s,{icon:"add",color:"green",round:"",onClick:I})],2)]),(0,a._)("div",null,[(0,a.Wm)((0,i.SU)(c()),{class:"list-group",list:d.value.barCodes,handle:".handle",group:"people",itemKey:"barCode"},{item:(0,a.w5)((({element:e,index:t})=>[(0,a._)("div",p,[(0,a.Wm)(Y,{class:"q-pa-xs q-ma-sm q-mb-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{class:"row text-h5 q-pa-none"},{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"col","bg-blue-2"))},[(0,a._)("div",S,[(0,a.Wm)(s,{class:"handle",color:"green",flat:"",dense:"",icon:"drag_handle"}),(0,a._)("div",D,(0,n.zw)(e.caption),1)]),(0,a._)("div",C,(0,n.zw)(e.barCode),1)],2),(0,a._)("div",{class:(0,n.C_)((0,i.SU)(g.$)((0,i.SU)(B),"text-right q-gutter-xs self-center","bg-purple-2"))},[(0,a.Wm)(s,{icon:"edit",color:"green",round:"",onClick:e=>E(t)},null,8,["onClick"])],2)])),_:2},1024),(0,a.Wm)(T,{class:"row q-pa-none text-subtitle2"},{default:(0,a.w5)((()=>[(0,a.Wm)(h),(0,a._)("div",f,(0,n.zw)(e.expanded?"Hide":"Show")+" Barcode",1),(0,a._)("div",w,[(0,a.Wm)(s,{color:"green",flat:"",dense:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:t=>$(e)},null,8,["icon","onClick"])])])),_:2},1024),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.wy)((0,a._)("div",null,[(0,a.Wm)(R),(0,a.Wm)(u,{class:"text-subtitle2 text-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(l.Z,{value:e.barCode,margin:0,width:1.5,height:75,format:"CODE39",lineColor:"black",elementTag:"canvas"},null,8,["value"])])),_:2},1024)],512),[[o.F8,e.expanded]])])),_:2},1024)])),_:2},1024)])])),_:1},8,["list"])]),(0,i.SU)(B)?((0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("pre",P,(0,n.zw)(JSON.stringify(d.value,null,4)),1)])):(0,a.kq)("",!0)])):(0,a.kq)("",!0)])])),_:1})}}});var q=s(1639),k=s(9885),U=s(4455),y=s(7471),O=s(4458),E=s(3190),N=s(1821),A=s(136),$=s(9003),W=s(926),I=s(9984),K=s.n(I);const T=(0,q.Z)(B,[["__scopeId","data-v-3952ae8a"]]),R=T;K()(B,"components",{QPage:k.Z,QBtn:U.Z,QInput:y.Z,QCard:O.Z,QCardSection:E.Z,QCardActions:N.Z,QSpace:A.Z,QSlideTransition:$.Z,QSeparator:W.Z})}}]);