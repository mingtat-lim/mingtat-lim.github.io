"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[792,870],{6327:(e,a,l)=>{l.r(a),l.d(a,{default:()=>Z});var o=l(1758),t=l(8790),s=l(8734),r=l(4533),n=l(9339),c=l(1868),d=l(883),u=l(1500),i=l(455),v=l(9482),g=l(614),b=l(587),p=l(3537),m=l(57),k=l.n(m),R=l(1234);const f=e=>((0,o.Qi)("data-v-1431a35e"),e=e(),(0,o.jt)(),e),y=f((()=>(0,o.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1))),h={class:"row q-pa-xs"},C={key:0,class:"fit row wrap justify-center items-start content-start"},x={key:0,class:"error"},w={class:"fit row wrap justify-center items-start content-start"},_={class:"bg-blue-4",style:{width:"300px",height:"300px"}},L={class:"q-pa-md"},q={class:"col"},E={class:"x-v-align-middle"},Q={class:"col"},A={class:"row"},F={class:"col"},S={class:"q-pl-sm text-h6"},X={class:"col q-pa-xs text-center"},O={key:0,class:"decode-result"},W={key:1,class:"decode-result"},T={key:2,class:"decode-result"},H={key:3,class:"decode-result"},P=(0,o.pM)({__name:"barcodeComponent",setup(e){const a=(0,s.KR)("off"),l=(0,s.KR)(),m=(0,s.KR)(),f=(0,g.C)(),{settings:P}=(0,b.bP)(f),{t:K}=(0,p.s9)(),I=(0,v.n)(),N=(0,i.rd)(),j=P.value.barcodePageDebug,D=(0,s.KR)(I.barcodes),V=e=>{j&&console.log("buttonClickHandler",e),D.value.length>0&&(D.value.forEach((e=>e.expended=!1)),D.value[e].expended=!0)};V(0);const B=e=>{j&&console.log("buttonEditClickHandler",e),N.push({path:"/barcodeEdit",query:{id:e}})},J=()=>{j&&console.log("onEnd"),I.save()},M=(0,s.KR)(!1),z=(0,s.KR)(),G=e=>{M.value=!M.value,z.value=Object.assign({},I.barcodes[e]),j&&console.log(z.value)};function U(e){j&&console.log("onDetect",e);const a=e,[l]=a;let o;if(j&&console.log(l.rawValue),console.log(l.rawValue),l.rawValue.startsWith("{")){const e=JSON.parse(l.rawValue);e.expended=!0,console.log(e),I.add(e),o=JSON.stringify(e)}else o=l.rawValue;m.value=o,te(),Y.value=d.c9.now().toISO(),oe()}let $;const Y=(0,s.KR)(),Z=(0,s.KR)(),ee=(0,s.KR)();function ae(){clearTimeout($),$=setTimeout((()=>{j&&console.log("cameraOffTimer"),oe(),ee.value=d.c9.now().toISO()}),1e4)}function le(){j&&console.log("onCameraHandler"),a.value="auto",Z.value=d.c9.now().toISO(),Y.value="",ee.value="",ae()}function oe(){j&&console.log("offCameraHandler"),a.value="off"}function te(){let e=new Audio("/censor-beep-01.mp3");e.play()}function se(e){j&&console.log("onErrorHandler",e),l.value=`[${e.name}]: `,"NotAllowedError"===e.name?l.value+="you need to grant camera access permission":"NotFoundError"===e.name?l.value+="no camera on this device":"NotSupportedError"===e.name?l.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?l.value+="is the camera already in use?":"OverconstrainedError"===e.name?l.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?l.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?l.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":l.value+=e.message}return(e,d)=>{const i=(0,o.g2)("q-btn"),v=(0,o.g2)("q-card-section"),g=(0,o.g2)("q-separator"),b=(0,o.g2)("q-card-actions"),p=(0,o.g2)("q-card");return(0,o.uX)(),(0,o.CE)("div",null,[y,(0,o.Lk)("div",h,[(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,o.bF)(i,{color:"blue",icon:"share",round:"",onClick:d[0]||(d[0]=e=>G(0))})],2),(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,o.bF)(i,{color:"blue",icon:"barcode_reader",round:"",onClick:d[1]||(d[1]=e=>le())})],2),(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"col text-h3 text-center text-capitalize","bg-yellow-3"))},(0,t.v_)("barcode"===(0,s.R1)(P).type?(0,s.R1)(K)("barcode_title"):(0,s.R1)(K)("qrcode_title")),3),(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,o.bF)(i,{color:"green",icon:"add",round:"",onClick:d[2]||(d[2]=e=>B(-1))})],2)]),M.value?((0,o.uX)(),(0,o.CE)("div",C,[(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"q-pa-xs text-center","bg-red-3"))},[(0,o.bF)((0,s.R1)(c.Ay),{value:JSON.stringify(z.value,null,4),type:"image/png",width:300,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])):(0,o.Q3)("",!0),"auto"===a.value?((0,o.uX)(),(0,o.CE)("div",{key:1,class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"q-pa-xs text-center","bg-red-3"))},[l.value?((0,o.uX)(),(0,o.CE)("div",x,(0,t.v_)(l.value),1)):(0,o.Q3)("",!0),(0,o.Lk)("div",w,[(0,o.Lk)("div",_,["auto"===a.value?((0,o.uX)(),(0,o.Wv)((0,s.R1)(u.tR),{key:0,onDetect:U,onError:se,camera:a.value},null,8,["camera"])):(0,o.Q3)("",!0)])])],2)):(0,o.Q3)("",!0),(0,o.Lk)("div",L,[(0,o.bF)((0,s.R1)(k()),{tag:"span",list:D.value,class:"list-group",handle:".handle","item-key":"caption",onEnd:J},{item:(0,o.k6)((({element:e,index:a})=>[(0,o.Lk)("div",null,[(0,o.Lk)("div",q,[(0,o.Lk)("div",E,[(0,o.bF)(p,{class:"my-card q-mb-md"},{default:(0,o.k6)((()=>[(0,o.bF)(v,{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"row q-pa-none","bg-blue-3 text-white"))},{default:(0,o.k6)((()=>[(0,o.Lk)("div",Q,[(0,o.Lk)("div",A,[(0,o.Lk)("div",F,[(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"row","bg-red-4"))},[(0,o.bF)(i,{flat:"","text-color":"green",icon:"drag_handle",class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"handle","bg-blue-2"))},null,8,["class"]),(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"text-h5","bg-blue-5"))},(0,t.v_)(e.caption)+" "+(0,t.v_)(void 0!==e.phone?e.phone.substring(0,4):"")+" "+(0,t.v_)(void 0!==e.phone?e.phone.substring(4):""),3)],2)])]),(0,o.Lk)("div",S,(0,t.v_)(e.barcode),1)]),(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"col-md-auto q-pa-xs x-v-align-middle","bg-red-3"))},[(0,o.bF)(i,{color:"green",icon:"edit",round:"",onClick:e=>B(a)},null,8,["onClick"])],2)])),_:2},1032,["class"]),(0,o.bF)(g),e.expended?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(b,{key:0,class:"q-pa-none",align:"right"},{default:(0,o.k6)((()=>[(0,o.bF)(i,{flat:"","no-caps":"",onClick:e=>V(a)},{default:(0,o.k6)((()=>[(0,o.eW)((0,t.v_)("barcode"===(0,s.R1)(P).type?(0,s.R1)(K)("barcode_showBarcode"):(0,s.R1)(K)("barcode_showQrcode")),1)])),_:2},1032,["onClick"])])),_:2},1024)),e.expended&&"barcode"===(0,s.R1)(P).type?((0,o.uX)(),(0,o.Wv)(v,{key:1,class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"row q-pa-none","bg-green-3 text-white"))},{default:(0,o.k6)((()=>[(0,o.Lk)("div",X,[(0,o.bF)((0,s.R1)(n.f),{value:e.barcode,width:2,height:80},null,8,["value"])])])),_:2},1032,["class"])):(0,o.Q3)("",!0),e.expended&&"qrcode"===(0,s.R1)(P).type?((0,o.uX)(),(0,o.Wv)(v,{key:2,class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"row q-pa-none","bg-green-3 text-white"))},{default:(0,o.k6)((()=>[(0,o.Lk)("div",{class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"q-pa-xs col text-center","bg-red-3"))},[(0,o.bF)((0,s.R1)(c.Ay),{value:e.barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:2},1032,["class"])):(0,o.Q3)("",!0)])),_:2},1024)])])])])),_:1},8,["list"])]),(0,s.R1)(P).barcodePageDebug?((0,o.uX)(),(0,o.Wv)(R.A,{key:2,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,s.R1)(I).barcodes,title:"db settings"},null,8,["value"])):(0,o.Q3)("",!0),(0,s.R1)(j)?((0,o.uX)(),(0,o.CE)("div",{key:3,class:(0,t.C4)((0,s.R1)(r.y)((0,s.R1)(j),"","bg-yellow-2"))},[(0,s.R1)(j)?((0,o.uX)(),(0,o.CE)("p",O,[(0,o.eW)(" Last result: "),(0,o.Lk)("b",null,(0,t.v_)(m.value),1)])):(0,o.Q3)("",!0),(0,s.R1)(j)?((0,o.uX)(),(0,o.CE)("p",W,[(0,o.eW)(" Camera On: "),(0,o.Lk)("b",null,(0,t.v_)(Z.value),1)])):(0,o.Q3)("",!0),(0,s.R1)(j)?((0,o.uX)(),(0,o.CE)("p",T,[(0,o.eW)(" Last Scan: "),(0,o.Lk)("b",null,(0,t.v_)(Y.value),1)])):(0,o.Q3)("",!0),(0,s.R1)(j)?((0,o.uX)(),(0,o.CE)("p",H,[(0,o.eW)(" Camera Off: "),(0,o.Lk)("b",null,(0,t.v_)(ee.value),1)])):(0,o.Q3)("",!0)],2)):(0,o.Q3)("",!0)])}}});var K=l(2807),I=l(1693),N=l(3316),j=l(4189),D=l(386),V=l(2669),B=l(492),J=l(8582),M=l.n(J);const z=(0,K.A)(P,[["__scopeId","data-v-1431a35e"]]),G=z;M()(P,"components",{QBtn:I.A,QCard:N.A,QCardSection:j.A,QSeparator:D.A,QCardActions:V.A,QIcon:B.A});const U=(0,o.pM)(Object.assign({name:"BarcodePage"},{__name:"barcodePage",setup(e){return(e,a)=>{const l=(0,o.g2)("q-page");return(0,o.uX)(),(0,o.Wv)(l,null,{default:(0,o.k6)((()=>[(0,o.bF)(G)])),_:1})}}}));var $=l(7716);const Y=U,Z=Y;M()(U,"components",{QPage:$.A})}}]);