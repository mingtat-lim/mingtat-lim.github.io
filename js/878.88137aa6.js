"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[878],{2875:(e,l,t)=>{function o(e,l,t){return e?`${l} ${t}`:l}t.d(l,{$:()=>o})},2620:(e,l,t)=>{t.d(l,{d:()=>o});class o{constructor(e){this._globalDebug=!1,this._eventPageDebug=!1,this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const l=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._globalDebug=l.globalDebug,this._eventPageDebug=l.eventPageDebug}saveSettings(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){const e={globalDebug:this._globalDebug,eventPageDebug:this._eventPageDebug};return e}get globalDebug(){return this._globalDebug}set globalDebug(e){this._globalDebug=e}get eventPageDebug(){return this._eventPageDebug}set eventPageDebug(e){this._eventPageDebug=e}}},9878:(e,l,t)=>{t.r(l),t.d(l,{default:()=>z});var o=t(9835),n=t(499),a=t(6970),i=t(1957),s=t(2620),c=t(9302),u=t(2875),r=function(e,l,t,o){function n(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,a){function i(e){try{c(o.next(e))}catch(l){a(l)}}function s(e){try{c(o["throw"](e))}catch(l){a(l)}}function c(e){e.done?t(e.value):n(e.value).then(i,s)}c((o=o.apply(e,l||[])).next())}))};const d={class:"col item-stretch"},g={class:"row items-center"},m={class:"text-h4 col-8 text-center"},p={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},v={class:"q-pa-xs"},b={key:1,xclass:"q-pt-md"},h={class:"row items-center"},_=(0,o._)("div",{class:"text-h4 col-8 text-center"},"慈济活动",-1),w={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},S={class:"col bg-blue-2"},k={class:"row items-center"},f={class:""},y={class:"text-subtitle1"},D={class:"col text-right q-gutter-xs self-center",style:{"min-width":"100px","max-width":"100px"}},C={class:""},x={class:"text-right q-gutter-xs self-center"},q={class:"row"},U={key:0,class:"row"},O={key:0},V={class:"col q-pa-xs"},T="events",W=(0,o.aZ)({__name:"AddEvent",setup(e){const l=(0,c.Z)(),t=new s.d(l),W=t.globalDebug||t.eventPageDebug,$=(0,n.iH)(Array());if(null!==l.localStorage.getItem(T)){W&&console.log("parse",l.localStorage.getItem(T));const e=JSON.parse(l.localStorage.getItem(T)+"");e.forEach(((e,l)=>{if($.value.push(e),0===l){const l={title:"精进日交通安排",message:"集合时间及地点和巴士车站",options:["无需安排交通","5:30am 武吉甘柏地铁站","5:30am 巴士站, Opp 461C, 武吉巴督西大道 6","5:30am 巴士站, Opp 451A, 武吉巴督西大道 6","5:40am West Mall 交通圈","5:45am 武吉巴督 230A, 武吉巴督 21 街","5:45am 巴士站, Opp Blk 19, Jln Jurong Kechil"]};e.option=l}if(3===l){const l={title:"慈善关怀曰",message:"请选择日期以及您是否是司机菩萨",options:["2023/10/07(周六) - 司机菩萨","2023/10/08(周日) - 司机菩萨","2023/10/07(周六)","2023/10/08(周日)"]};e.option=l}}))}let E=(0,n.iH)("list");const K=(0,n.iH)({event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1});function N(e,t){var o,n;W&&console.log("signupHandler",e,t);const a=$.value[e],i=P(a);i?t?l.dialog({title:null===(o=a.option)||void 0===o?void 0:o.title,message:null===(n=a.option)||void 0===n?void 0:n.message,options:{type:i.type,model:i.model,items:i.items},cancel:!0,persistent:!0}).onOk((e=>{var t;W&&console.log(">>>> OK, received",e),a.isSignup=!0,a.signupOption=null===(t=a.option)||void 0===t?void 0:t.options[e],z(),l.notify({message:`报名成功! ${a.event}`,color:"green-6"})})).onCancel((()=>{W&&console.log(">>>> Cancel"),l.notify({message:`报名不成功! ${a.event}`,color:"red-6"})})).onDismiss((()=>{W&&console.log("I am triggered on both OK and Cancel")})):(W&&console.log("退出报名",e,t),l.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${a.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{W&&console.log("OK"),a.isSignup=t,a.signupOption=void 0,z(),l.notify({message:`退出活动成功! ${a.event}`,color:"red",icon:"warning"})})).onCancel((()=>{W&&console.log("Cancel")})).onDismiss((()=>{W&&console.log("I am triggered on both OK and Cancel")}))):t?(a.isSignup=t,z(),l.notify({message:`报名成功! ${a.event}`,color:"green-6"})):l.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${a.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{W&&console.log("OK"),a.isSignup=t,a.signupOption=void 0,z(),l.notify({message:`退出活动成功! ${a.event}`,color:"red",icon:"warning"})})).onCancel((()=>{W&&console.log("Cancel")})).onDismiss((()=>{W&&console.log("I am triggered on both OK and Cancel")}))}function P(e){if(e.option){const l={type:"radio",model:"0",items:[]};return e.option.options.forEach(((e,t)=>{var o;null===(o=l.items)||void 0===o||o.push({label:e,value:t.toString()})})),l}}function Z(e){W&&console.log("checkinHandler",e)}function I(e){W&&console.log("selectHandler",e),K.value=$.value[e],E.value="edit"}function J(){W&&console.log("updateHandler"),l.localStorage.set(T,JSON.stringify($.value)),E.value="list"}function H(){W&&console.log("cancelHandler"),E.value="list"}function Q(e){W&&console.log("showBarcode");const l=!e.expanded;$.value.forEach((e=>e.expanded=!1)),e.expanded=l}function j(e){W&&console.log("deleteHandler",e),l.dialog({title:"Confirm",message:`Are you sure you want to delete the selected row (id: ${$.value[e].event})?`,cancel:!0,persistent:!0}).onOk((()=>r(this,void 0,void 0,(function*(){$.value=[...$.value.slice(0,e),...$.value.slice(e+1)],l.localStorage.set(T,JSON.stringify($.value)),l.notify("Record deleted")}))))}function B(){K.value={event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1},E.value="add"}function A(){$.value.push(K.value),l.localStorage.set(T,JSON.stringify($.value)),E.value="list"}function z(){W&&console.log("saveData"),l.localStorage.set(T,JSON.stringify($.value))}return(e,l)=>{const t=(0,o.up)("q-btn"),s=(0,o.up)("q-input"),c=(0,o.up)("q-icon"),r=(0,o.up)("q-card-section"),T=(0,o.up)("q-chip"),P=(0,o.up)("q-space"),z=(0,o.up)("q-card-actions"),F=(0,o.up)("q-slide-transition"),Y=(0,o.up)("q-card"),R=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(R,{class:"q-pa-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",d,[["add","edit"].includes((0,n.SU)(E))?((0,o.wg)(),(0,o.iD)("div",{key:0,class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"","bg-blue-2"))},[(0,o._)("div",g,[(0,o._)("div",m,(0,a.zw)("add"===(0,n.SU)(E)?"Add New":"Edit"),1),(0,o._)("div",p,["add"===(0,n.SU)(E)?((0,o.wg)(),(0,o.j4)(t,{key:0,icon:"save",color:"green",round:"",onClick:A})):(0,o.kq)("",!0),"edit"===(0,n.SU)(E)?((0,o.wg)(),(0,o.j4)(t,{key:1,icon:"update",color:"green",round:"",onClick:J})):(0,o.kq)("",!0),["add","edit"].includes((0,n.SU)(E))?((0,o.wg)(),(0,o.j4)(t,{key:2,icon:"cancel",color:"green",round:"",onClick:H})):(0,o.kq)("",!0)])]),(0,o._)("div",v,[(0,o.Wm)(s,{modelValue:K.value.event,"onUpdate:modelValue":l[0]||(l[0]=e=>K.value.event=e),label:"Event Name",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o.Wm)(s,{modelValue:K.value.eventDate,"onUpdate:modelValue":l[1]||(l[1]=e=>K.value.eventDate=e),label:"Date",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o._)("div",{class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"row q-col-gutter-sm","bg-yellow-2"))},[(0,o.Wm)(s,{modelValue:K.value.startTime,"onUpdate:modelValue":l[2]||(l[2]=e=>K.value.startTime=e),label:"Start Time",class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"]),(0,o.Wm)(s,{modelValue:K.value.endTime,"onUpdate:modelValue":l[3]||(l[3]=e=>K.value.endTime=e),label:"End Time",class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"])],2),(0,o.Wm)(s,{modelValue:K.value.location,"onUpdate:modelValue":l[4]||(l[4]=e=>K.value.location=e),label:"Location",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"])])],2)):(0,o.kq)("",!0),null!==$.value&&"list"===(0,n.SU)(E)?((0,o.wg)(),(0,o.iD)("div",b,[(0,o._)("div",h,[_,(0,o._)("div",w,[(0,o.Wm)(t,{icon:"add",color:"green",round:"",onClick:B})])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)($.value,((e,l)=>((0,o.wg)(),(0,o.j4)(Y,{class:"q-pa-xs",key:l},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{class:"row text-h5 q-pa-none"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o._)("div",k,[e.isSignup?((0,o.wg)(),(0,o.j4)(c,{key:0,name:"check_circle",color:"green",class:""})):(0,o.kq)("",!0),(0,o._)("div",f,(0,a.zw)(e.event),1)]),(0,o._)("div",y,(0,a.zw)(e.eventDate),1)]),(0,o._)("div",D,[(0,o.Wm)(t,{icon:"edit",color:"green",round:"",onClick:e=>I(l)},null,8,["onClick"]),(0,o.Wm)(t,{icon:"delete",color:"green",round:"",onClick:e=>j(l)},null,8,["onClick"])])])),_:2},1024),(0,o.Wm)(z,{class:"row q-pa-none text-subtitle2"},{default:(0,o.w5)((()=>[e.isSignup?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(T,{key:0,clickable:"",color:"green","text-color":"white",onClick:e=>N(l,!0)},{default:(0,o.w5)((()=>[(0,o.Uk)("报名")])),_:2},1032,["onClick"])),e.isSignup?((0,o.wg)(),(0,o.j4)(T,{key:1,clickable:"",color:"red","text-color":"white",onClick:e=>N(l,!1)},{default:(0,o.w5)((()=>[(0,o.Uk)("退出")])),_:2},1032,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(T,{clickable:"",color:"green","text-color":"white",onClick:e=>Z(l)},{default:(0,o.w5)((()=>[(0,o.Uk)("签到")])),_:2},1032,["onClick"]),(0,o.Wm)(P),(0,o._)("div",C,(0,a.zw)(e.expanded?"隐藏":"显示")+"详细资料",1),(0,o._)("div",x,[(0,o.Wm)(t,{color:"green",flat:"",dense:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:l=>Q(e)},null,8,["icon","onClick"])])])),_:2},1024),(0,o.Wm)(F,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o._)("div",q,[(0,o.Wm)(s,{modelValue:e.startTime,"onUpdate:modelValue":l=>e.startTime=l,label:"Start Time",readonly:"",class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),(0,o.Wm)(s,{modelValue:e.endTime,"onUpdate:modelValue":l=>e.endTime=l,label:"End Time",readonly:"",class:(0,a.C_)((0,n.SU)(u.$)((0,n.SU)(W),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),e.signupOption?((0,o.wg)(),(0,o.iD)("div",U,(0,a.zw)(e.signupOption),1)):(0,o.kq)("",!0)],512),[[i.F8,e.expanded]])])),_:2},1024)])),_:2},1024)))),128)),(0,n.SU)(W)?((0,o.wg)(),(0,o.iD)("div",O,[(0,o._)("pre",V,(0,a.zw)(JSON.stringify($.value,null,4)),1)])):(0,o.kq)("",!0)])):(0,o.kq)("",!0)])])),_:1})}}});var $=t(9885),E=t(4455),K=t(7471),N=t(4458),P=t(3190),Z=t(2857),I=t(136),J=t(1821),H=t(7691),Q=t(9003),j=t(9984),B=t.n(j);const A=W,z=A;B()(W,"components",{QPage:$.Z,QBtn:E.Z,QInput:K.Z,QCard:N.Z,QCardSection:P.Z,QIcon:Z.Z,QSpace:I.Z,QCardActions:J.Z,QChip:H.Z,QSlideTransition:Q.Z})}}]);