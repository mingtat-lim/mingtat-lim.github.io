"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[41],{614:(e,l,a)=>{a.d(l,{C:()=>r});var t=a(5679),o=a(8993),s=a(3537);const n="settings-db-v2",i=()=>({locale:"zh-TC",type:"barcode",systemAdmin:!1,barcodePageDebug:!1,barcodeEditPageDebug:!1,settingsPageDebug:!1,sharePageDebug:!1,homePageDebug:!1}),d=()=>{const{locale:e}=(0,s.s9)({useScope:"global"}),l=o.A.getItem(n),a=l||i();return e.value=a.locale,a},r=(0,t.nY)(n,{state:()=>({settings:d(),lang:(0,s.s9)({useScope:"global"})}),actions:{updateSettings(){this.settings.locale!==this.lang.locale&&(this.lang.locale=this.settings.locale),o.A.set(n,this.settings)},restore(e){this.settings=e,this.updateSettings()},reset(){this.settings=i(),this.updateSettings()}}})},1422:(e,l,a)=>{a.r(l),a.d(l,{default:()=>D});var t=a(1758),o=a(8790),s=a(8734),n=a(455),i=a(4533),d=a(9482),r=a(9270),u=a(4907),c=a(3537),b=a(614),m=a(5679);const v={class:"row q-pa-xs"},p={class:"q-pa-md"},_={key:0},g={class:"row"},h={class:"row items-center"},k={class:"row items-center"},y={class:"row items-center"},V=(0,t.pM)({__name:"codeEditComponent",setup(e){const l=(0,b.C)(),{settings:a}=(0,m.bP)(l),{t:V}=(0,c.s9)(),f=(0,u.A)(),R=(0,n.rd)(),C=(0,n.lq)(),E=(0,d.n)(),A=a.value.barcodePageDebug;let q=!1;const L=(0,s.KR)(),F=(0,s.KR)(),w=C.query.id?parseInt(C.query.id.toString(),10):-1;let x={caption:"",barcode:"",expended:!1};-1===w?q=!0:x=Object.assign({},E.barcodes[w]);const U=[{label:V("region_east"),value:"东"},{label:V("region_central"),value:"中"},{label:V("region_north"),value:"北"},{label:V("region_south"),value:"南"}],S=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"}],O=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"}],D=[{label:V("volunteer_status_greyUniform"),value:"灰衣"},{label:V("volunteer_status_traineeCommissioners"),value:"见习委员"},{label:V("volunteer_status_traineeFaithCorp"),value:"见习慈诚"},{label:V("volunteer_status_attachmentCommissioners"),value:"培训委员"},{label:V("volunteer_status_attachmentFaithCorp"),value:"培训慈诚"},{label:V("volunteer_status_certifiedCommissioners"),value:"委员"},{label:V("volunteer_status_certifiedFaithCorp"),value:"慈诚"}],I=(0,s.KR)(x);let P=JSON.stringify(I.value);const Q=()=>{var e,l,a,t;if(A&&console.log("onSaveButtonClick"),P===JSON.stringify(I.value))f.notify({type:"warning",position:"center",message:V("barcodeEdit_save_warning_message")});else{if(null===(e=L.value)||void 0===e||e.validate(),null===(l=F.value)||void 0===l||l.validate(),(null===(a=L.value)||void 0===a?void 0:a.hasError)||(null===(t=F.value)||void 0===t?void 0:t.hasError))return void f.notify({type:"warning",position:"center",message:V("barcodeEdit_validation")});q?E.add(I.value):E.update(I.value,w),f.notify({type:"positive",position:"center",message:V("barcodeEdit_notify_RecordUpdated")}),P=JSON.stringify(I.value),R.push("/barcode")}},z=()=>{A&&console.log("onDeleteButtonClick"),f.dialog({title:V("barcodeEdit_comfirmation_title"),message:V("barcodeEdit_delete_confirmation"),cancel:{label:V("button_caption_cancel"),push:!0},ok:{label:V("button_caption_delete")},persistent:!0}).onOk(()=>{E.delete(w),f.notify({type:"positive",position:"center",message:V("barcodeEdit_notify_RecordDeleted")}),R.push("/barcode")}).onCancel(()=>{}).onDismiss(()=>{})},W=()=>{A&&console.log("onCloseButtonClick"),R.push("/barcode")};function B(){return new Promise((e,l)=>{f.dialog({title:V("barcodeEdit_comfirmation_title"),message:V("barcodeEdit_unsave_warning_message"),cancel:{label:V("button_caption_cancel")},ok:{label:V("button_caption_yes")}}).onOk(()=>{e(!0)}).onCancel(()=>{l()}).onDismiss(()=>{})})}return(0,n.JZ)((e,l,a)=>{P!==JSON.stringify(I.value)?B().then(()=>a()).catch(()=>!1):a()}),(e,l)=>{const n=(0,t.g2)("q-btn"),d=(0,t.g2)("q-select"),u=(0,t.g2)("q-option-group"),c=(0,t.g2)("q-field");return(0,t.uX)(),(0,t.CE)(t.FK,null,[l[19]||(l[19]=(0,t.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1)),(0,t.Lk)("div",v,[(0,t.Lk)("div",{class:(0,o.C4)((0,s.R1)(i.y)((0,s.R1)(A),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,s.R1)(q)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(n,{key:0,color:"red",icon:"delete",round:"",onClick:z,class:"q-mr-xs"}))],2),(0,t.Lk)("div",{class:(0,o.C4)((0,s.R1)(i.y)((0,s.R1)(A),"col text-h3 text-center text-capitalize","bg-blue-3"))},(0,o.v_)((0,s.R1)(q)?(0,s.R1)(V)("barcodeEdit_add"):(0,s.R1)(V)("barcodeEdit_update")),3),(0,t.Lk)("div",{class:(0,o.C4)((0,s.R1)(i.y)((0,s.R1)(A),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,t.bF)(n,{color:"green",icon:"close",round:"",onClick:W,class:"q-mr-md"}),(0,s.R1)(q)?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.Wv)(n,{key:0,color:"green",icon:"save_as",round:"",onClick:Q,class:"q-mr-xs"})),(0,s.R1)(q)?((0,t.uX)(),(0,t.Wv)(n,{key:1,color:"green",icon:"save",round:"",onClick:Q,class:"q-mr-xs"})):(0,t.Q3)("",!0)],2)]),(0,t.Lk)("div",p,[(0,t.bF)((0,s.R1)(r.A),{outlined:"","bottom-slots":"",clearable:"",modelValue:I.value.caption,"onUpdate:modelValue":l[0]||(l[0]=e=>I.value.caption=e),ref_key:"captionControl",ref:L,rules:[e=>!!e||(0,s.R1)(V)("barcodeEdit_item_validate_message")],label:(0,s.R1)(V)("barcodeEdit_item")},{prepend:(0,t.k6)(()=>[...l[13]||(l[13]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," id_card ",-1)])]),_:1},8,["modelValue","rules","label"]),(0,t.bF)((0,s.R1)(r.A),{outlined:"","bottom-slots":"",clearable:"",modelValue:I.value.name,"onUpdate:modelValue":l[1]||(l[1]=e=>I.value.name=e),label:(0,s.R1)(V)("barcodeEdit_english_name")},{prepend:(0,t.k6)(()=>[...l[14]||(l[14]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," language_gb_english ",-1)])]),_:1},8,["modelValue","label"]),(0,t.bF)((0,s.R1)(r.A),{outlined:"","bottom-slots":"",clearable:"",modelValue:I.value.barcode,"onUpdate:modelValue":l[2]||(l[2]=e=>I.value.barcode=e),ref_key:"captionBarcode",ref:F,rules:[e=>!!e||(0,s.R1)(V)("barcodeEdit_barcode_validate_message")],label:(0,s.R1)(V)("barcodeEdit_barcode")},{prepend:(0,t.k6)(()=>[...l[15]||(l[15]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," barcode ",-1)])]),_:1},8,["modelValue","rules","label"]),(0,t.bF)((0,s.R1)(r.A),{outlined:"","bottom-slots":"",clearable:"",modelValue:I.value.phone,"onUpdate:modelValue":l[3]||(l[3]=e=>I.value.phone=e),label:(0,s.R1)(V)("barcodeEdit_phone")},{prepend:(0,t.k6)(()=>[...l[16]||(l[16]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," phone ",-1)])]),_:1},8,["modelValue","label"]),(0,s.R1)(a).systemAdmin?((0,t.uX)(),(0,t.CE)("div",_,[(0,t.bF)(d,{outlined:"","bottom-slots":"",clearable:"","emit-value":"","map-options":"","label-slot":"",modelValue:I.value.status,"onUpdate:modelValue":l[4]||(l[4]=e=>I.value.status=e),options:D},{label:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,s.R1)(V)("barcodeEdit_volunteer_status")),1)]),_:1},8,["modelValue"]),(0,t.Lk)("div",g,[(0,t.bF)(c,{class:"col",outlined:"","bottom-slots":"",clearable:"","label-slot":"","stack-label":"",modelValue:I.value.region,"onUpdate:modelValue":l[6]||(l[6]=e=>I.value.region=e)},{label:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,s.R1)(V)("barcodeEdit_volunteer_region")),1)]),control:(0,t.k6)(()=>[(0,t.bF)(u,{inline:"",color:"primary",type:"radio",class:"q-mt-xs",options:U,modelValue:I.value.region,"onUpdate:modelValue":l[5]||(l[5]=e=>I.value.region=e)},{label:(0,t.k6)(e=>[(0,t.Lk)("div",h,[(0,t.Lk)("span",null,(0,o.v_)(e.label),1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),(0,t.bF)(c,{class:"col q-ml-xs q-mr-xs",outlined:"","bottom-slots":"",clearable:"","label-slot":"","stack-label":"",modelValue:I.value.zone,"onUpdate:modelValue":l[8]||(l[8]=e=>I.value.zone=e)},{label:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,s.R1)(V)("barcodeEdit_volunteer_zone")),1)]),control:(0,t.k6)(()=>[(0,t.bF)(u,{inline:"",color:"primary",type:"radio",class:"q-mt-xs",options:S,modelValue:I.value.zone,"onUpdate:modelValue":l[7]||(l[7]=e=>I.value.zone=e)},{label:(0,t.k6)(e=>[(0,t.Lk)("div",k,[(0,t.Lk)("span",null,(0,o.v_)(e.label),1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),(0,t.bF)(c,{class:"col",outlined:"","bottom-slots":"",clearable:"","label-slot":"","stack-label":"",modelValue:I.value.team,"onUpdate:modelValue":l[10]||(l[10]=e=>I.value.team=e)},{label:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)((0,s.R1)(V)("barcodeEdit_volunteer_team")),1)]),control:(0,t.k6)(()=>[(0,t.bF)(u,{inline:"",color:"primary",type:"radio",class:"q-mt-xs",options:O,modelValue:I.value.team,"onUpdate:modelValue":l[9]||(l[9]=e=>I.value.team=e)},{label:(0,t.k6)(e=>[(0,t.Lk)("div",y,[(0,t.Lk)("span",null,(0,o.v_)(e.label),1)])]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),(0,t.bF)(d,{outlined:"","bottom-slots":"",clearable:"","emit-value":"","map-options":"",dense:"","label-slot":"","use-input":"","use-chips":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","new-value-mode":"add-unique",modelValue:I.value.tags,"onUpdate:modelValue":l[11]||(l[11]=e=>I.value.tags=e),label:"Tags",hint:"Enter tag here and press enter...","hide-hint":""},{prepend:(0,t.k6)(()=>[...l[17]||(l[17]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," tag ",-1)])]),_:1},8,["modelValue"]),(0,t.bF)((0,s.R1)(r.A),{"lazy-rules":"",outlined:"","bottom-slots":"",dense:"",clearable:"",modelValue:I.value.notes,"onUpdate:modelValue":l[12]||(l[12]=e=>I.value.notes=e),label:"Notes",type:"textarea"},{prepend:(0,t.k6)(()=>[...l[18]||(l[18]=[(0,t.Lk)("span",{class:"material-symbols-outlined"}," notes ",-1)])]),_:1},8,["modelValue"])])):(0,t.Q3)("",!0)])],64)}}});var f=a(2807),R=a(1693),C=a(6088),E=a(7156),A=a(9495),q=a(8582),L=a.n(q);const F=(0,f.A)(V,[["__scopeId","data-v-4f8d6f20"]]),w=F;L()(V,"components",{QBtn:R.A,QInput:r.A,QSelect:C.A,QField:E.A,QOptionGroup:A.A});const x={class:"item"},U=(0,t.pM)(Object.assign({name:"BarcodePage"},{__name:"barcodeEditPage",setup(e){return(e,l)=>{const a=(0,t.g2)("q-page");return(0,t.uX)(),(0,t.Wv)(a,{class:"row content-container"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",x,[(0,t.bF)(w)])]),_:1})}}}));var S=a(7716);const O=(0,f.A)(U,[["__scopeId","data-v-5a5385d4"]]),D=O;L()(U,"components",{QPage:S.A})},4533:(e,l,a)=>{function t(e,l,a){return e?`${l} ${a}`:l}a.d(l,{y:()=>t})},9482:(e,l,a)=>{a.d(l,{n:()=>i});var t=a(5679),o=a(8993);const s="barcode-db-v1",n="barcode-db",i=(0,t.nY)(s,{state:()=>({_loaded:!1,_barcodes:new Array}),getters:{barcodes:e=>{if(!e._loaded){const l=o.A.getItem(s);if(e._barcodes=null!==l?l:new Array,e._loaded=!0,null!==o.A.getItem(n)){const l=JSON.parse(o.A.getItem(n)+"");l.barCodes.forEach(l=>{e._barcodes.push({caption:l.caption,barcode:l.barCode,expended:!1})}),o.A.removeItem(n),o.A.set(s,e._barcodes)}}return e._barcodes}},actions:{save(){o.A.set(s,this._barcodes)},add(e){this._barcodes.push(e),this.save()},update(e,l){this._barcodes[l]=Object.assign({},e),this.save()},delete(e){return e>=0&&e<this._barcodes.length?(this._barcodes.splice(e,1),this.save(),!0):(console.error("Index out of range"),!1)},restore(e){this._barcodes=e,this.save()},reset(){this._barcodes=[],this.save()}}})}}]);