"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[208,493],{2532:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ke});var a=o(1347),l=o(7763),n=o(4187),r=o(8677),s=o(4144),c=o(1868),i=o(296),d=o(6179),u=o(3022),v=o(455),b=o(5887),p=o(7047),f=o(6305),g=o(2291),k=o(5686),h=o.n(k),R=o(8234);const m={class:"row q-pa-xs"},y={key:0,class:"fit row wrap justify-center items-start content-start"},x={class:"text-h4"},_={key:0,class:"error"},C={class:"fit row wrap justify-center items-start content-start"},w={class:"bg-blue-4",style:{width:"300px",height:"300px"}},L={key:2,class:"q-pa-md"},q={class:"row"},E={class:"col"},F={class:"fit row wrap justify-start items-center content-start"},Q={class:"text-h5 q-pr-xs"},A=["href"],S={key:1},X={class:"q-pl-sm text-h6"},T={class:"col q-pr-xs text-right"},W={class:"q-pl-sm text-h6"},K={class:"col q-pa-xs text-center"},O={class:"q-pa-md"},P={key:0},I={class:"row"},H={class:"row"},D={class:"col"},N={class:"fit row wrap justify-start items-center content-start"},z={class:"text-h5"},B=["href"],V={key:1},M={class:"q-pl-sm text-h6"},j={class:"col q-pr-xs text-right"},$={class:"q-pl-sm text-h6"},J={class:"col q-pa-xs text-center"},U={key:0,class:"decode-result"},G={key:1,class:"decode-result"},Y={key:2,class:"decode-result"},Z={key:3,class:"decode-result"},ee=(0,a.pM)({__name:"barcodeComponent",setup(e){const t=(0,n.KR)("off"),o=(0,n.KR)(),k=(0,u.A)(),ee=(0,p.C)(),{settings:te}=(0,f.bP)(ee),{t:oe}=(0,g.s9)(),ae=(0,b.n)(),le=(0,v.rd)(),ne=te.value.barcodePageDebug,re=(0,n.KR)(ae.barcodes),[se,...ce]=re.value,ie=e=>{ne&&console.log("buttonClickHandler",e),re.value.length>0&&(re.value.forEach((e=>e.expended=!1)),re.value[e].expended=!0)};ie(0);const de=e=>{if("en-US"!==te.value.locale)return e;switch(e){case"东":return"E";case"中":return"C";case"北":return"N";case"南":return"S";default:return e}},ue=e=>{ne&&console.log("buttonEditClickHandler",e),le.push({path:"/barcodeEdit",query:{id:e}})},ve=()=>{ne&&console.log("onEnd"),ae.save()},be=(0,n.KR)(!1),pe=(0,n.KR)(),fe=(0,n.KR)(),ge=e=>{be.value=!0,pe.value={...ae.barcodes[e]},fe.value=pe.value.caption,ne&&console.log(pe.value),ke(),xe(10)};function ke(){window.scrollTo(0,0)}let he,Re,me,ye=(0,n.KR)(0);function xe(e){ye.value=e,he=setInterval((()=>{1===ye.value&&(be.value=!1,clearInterval(he)),ye.value--}),1e3)}function _e(e){Re=setTimeout((()=>{e()}),5e3)}function Ce(e){console.log("onLeft"),_e(e.reset)}function we(e){console.log("onRight"),_e(e.reset)}function Le(e){ne&&console.log("onDetect",e);const t=e,[a]=t;let l;if(ne&&console.log(a.rawValue),console.log(a.rawValue),a.rawValue.startsWith("{")){const e=JSON.parse(a.rawValue);k.dialog({title:oe("barcodeEdit_comfirmation_title"),message:oe("barcode_import_confirmation",{name:e.caption}),cancel:{label:oe("button_caption_cancel")},ok:{label:oe("button_caption_yes"),push:!0},persistent:!0}).onOk((()=>{ae.add(e),ie(ae.barcodes.length-1),k.notify({type:"positive",position:"center",message:oe("barcode_notify_RecordAdded")})})).onCancel((()=>{})).onDismiss((()=>{})),l=JSON.stringify(e)}else l=a.rawValue;o.value=l,Xe(),qe.value=i.c9.now().toISO(),Se()}(0,a.xo)((()=>{clearTimeout(Re),clearInterval(he)}));const qe=(0,n.KR)(),Ee=(0,n.KR)(),Fe=(0,n.KR)();function Qe(){clearTimeout(me),me=setTimeout((()=>{ne&&console.log("cameraOffTimer"),Se(),Fe.value=i.c9.now().toISO()}),1e4)}function Ae(){ne&&console.log("onCameraHandler"),t.value="auto",Ee.value=i.c9.now().toISO(),qe.value="",Fe.value="",Qe()}function Se(){ne&&console.log("offCameraHandler"),t.value="off"}function Xe(){let e=new Audio("/censor-beep-01.mp3");e.play()}function Te(e,t){for(const o of e){const[e,...a]=o.cornerPoints;t.strokeStyle="red",t.beginPath(),t.moveTo(e.x,e.y);for(const{x:e,y:o}of a)t.lineTo(e,o);t.lineTo(e.x,e.y),t.closePath(),t.stroke()}}function We(e,t){for(const o of e){const{boundingBox:e}=o;t.lineWidth=2,t.strokeStyle="#007bff",t.strokeRect(e.x,e.y,e.width,e.height)}}function Ke(e,t){for(const o of e){const{boundingBox:e,rawValue:a}=o,l=e.x+e.width/2,n=e.y+e.height/2,r=Math.max(12,50*e.width/t.canvas.width);t.font=`bold ${r}px sans-serif`,t.textAlign="center",t.lineWidth=3,t.strokeStyle="#35495e",t.strokeText(o.rawValue,l,n),t.fillStyle="#5cb984",t.fillText(a,l,n)}}const Oe=[{text:"nothing (default)",value:void 0},{text:"outline",value:Te},{text:"centered text",value:Ke},{text:"bounding box",value:We}],Pe=(0,n.KR)(Oe[1]),Ie=(0,n.KR)({facingMode:"environment"});let He;He=["qr_code","ean_13","unknown"];const De=(0,n.KR)("");function Ne(e){ne&&console.log("onErrorHandler",e),De.value=`[${e.name}]: `,"NotAllowedError"===e.name?De.value+="you need to grant camera access permission":"NotFoundError"===e.name?De.value+="no camera on this device":"NotSupportedError"===e.name?De.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?De.value+="is the camera already in use?":"OverconstrainedError"===e.name?De.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?De.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?De.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":De.value+=e.message}const ze=e=>{ne&&console.log("onDeleteButtonClick"),k.dialog({title:oe("barcodeEdit_comfirmation_title"),message:oe("barcodeEdit_delete_confirmation"),cancel:{label:oe("button_caption_cancel"),push:!0},ok:{label:oe("button_caption_delete")},persistent:!0}).onOk((()=>{ae.delete(e),k.notify({type:"positive",position:"center",message:oe("barcodeEdit_notify_RecordDeleted")}),le.push("/barcode")})).onCancel((()=>{})).onDismiss((()=>{}))};return(e,i)=>{const u=(0,a.g2)("q-btn"),v=(0,a.g2)("q-item"),b=(0,a.g2)("q-slide-item"),p=(0,a.g2)("q-list"),f=(0,a.g2)("q-card-section"),g=(0,a.g2)("q-separator"),k=(0,a.g2)("q-card-actions"),ee=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)("div",null,[i[11]||(i[11]=(0,a.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1)),(0,a.Lk)("div",m,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"blue",icon:"barcode_reader",round:"",onClick:i[0]||(i[0]=e=>Ae())})],2),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col text-h3 text-center text-capitalize","bg-yellow-3"))},(0,l.v_)("barcode"===(0,n.R1)(te).type?(0,n.R1)(oe)("barcode_title"):(0,n.R1)(oe)("qrcode_title")),3),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"green",icon:"add",round:"",onClick:i[1]||(i[1]=e=>ue(-1))})],2)]),be.value?((0,a.uX)(),(0,a.CE)("div",y,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-xs text-center","bg-red-3"))},[(0,a.Lk)("div",x,(0,l.v_)(fe.value)+" - "+(0,l.v_)((0,n.R1)(ye)),1),(0,a.bF)((0,n.R1)(c.Ay),{value:JSON.stringify(pe.value,null,4),type:"image/png",width:300,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])):(0,a.Q3)("",!0),"auto"===t.value?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-xs text-center","bg-red-3"))},[De.value?((0,a.uX)(),(0,a.CE)("div",_,(0,l.v_)(De.value),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",C,[(0,a.Lk)("div",w,[(0,a.bF)((0,n.R1)(d.tR),{onDetect:Le,onError:Ne,track:Pe.value.value,constraints:Ie.value,formats:(0,n.R1)(He),camera:t.value},null,8,["track","constraints","formats","camera"])])])],2)):(0,a.Q3)("",!0),(0,n.R1)(se)?((0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",null,[(0,a.bF)(ee,{class:"my-card"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-none","bg-blue-6 text-white"))},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{onLeft:Ce,onRight:we,"left-color":"blue-3","right-color":"blue-3"},{right:(0,a.k6)((()=>[(0,a.Lk)("div",q,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col text-h5 text-center text-capitalize q-mr-md","bg-blue-3"))},(0,l.v_)((0,n.R1)(se).caption),3),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"blue",icon:"share",round:"",onClick:i[2]||(i[2]=e=>ge(0)),class:"q-mr-md"}),(0,a.bF)(u,{color:"green",icon:"edit",round:"",onClick:i[3]||(i[3]=e=>ue(0))})],2)])])),default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",E,[(0,a.Lk)("div",F,[(0,a.bF)(u,{flat:"","text-color":"green",icon:"drag_handle",class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"handle","bg-blue-2"))},null,8,["class"]),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"text-h5 col-grow self-stretch","bg-blue-3")),style:{overflow:"auto"}},(0,l.v_)((0,n.R1)(se).caption),3),(0,a.Lk)("div",Q,[(0,n.R1)(se).phone?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`https://wa.me/${(0,n.R1)(se).phone}`,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit","text-decoration":"underline",cursor:"pointer"}},(0,l.v_)(void 0!==(0,n.R1)(se).phone?(0,n.R1)(se).phone.substring(0,4):"")+" "+(0,l.v_)(void 0!==(0,n.R1)(se).phone?(0,n.R1)(se).phone.substring(4):""),9,A)):((0,a.uX)(),(0,a.CE)("span",S))]),i[5]||(i[5]=(0,a.Lk)("div",{class:"flex-break"},null,-1)),(0,a.Lk)("div",X,(0,l.v_)((0,n.R1)(se).barcode),1),(0,a.Lk)("div",T,[(0,a.Lk)("div",W,(0,l.v_)((0,n.R1)(se).region)+(0,l.v_)((0,n.R1)(se).zone)+(0,l.v_)((0,n.R1)(se).team),1)])])])])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),(0,a.bF)(g),(0,n.R1)(se).expended?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(k,{key:0,class:"q-pa-none",align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{flat:"","no-caps":"",onClick:i[4]||(i[4]=e=>ie(0))},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)("barcode"===(0,n.R1)(te).type?(0,n.R1)(oe)("barcode_showBarcode"):(0,n.R1)(oe)("barcode_showQrcode")),1)])),_:1})])),_:1})),(0,n.R1)(se).expended&&"barcode"===(0,n.R1)(te).type?((0,a.uX)(),(0,a.Wv)(f,{key:1,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",K,[(0,a.bF)((0,n.R1)(s.f),{value:(0,n.R1)(se).barcode,width:2,height:80},null,8,["value"])])])),_:1},8,["class"])):(0,a.Q3)("",!0),(0,n.R1)(se).expended&&"qrcode"===(0,n.R1)(te).type?((0,a.uX)(),(0,a.Wv)(f,{key:2,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-xs col text-center","bg-red-3"))},[(0,a.bF)((0,n.R1)(c.Ay),{value:(0,n.R1)(se).barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:1},8,["class"])):(0,a.Q3)("",!0)])),_:1})])])):(0,a.Q3)("",!0),(0,a.Lk)("div",O,[(0,a.bF)((0,n.R1)(h()),{tag:"span",list:re.value,class:"list-group",handle:".handle","item-key":"caption",onEnd:ve},{item:(0,a.k6)((({element:e,index:t})=>[t>0?((0,a.uX)(),(0,a.CE)("div",P,[(0,a.bF)(ee,{class:"my-card q-mb-md"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-none","bg-blue-6 text-white"))},{default:(0,a.k6)((()=>[(0,a.bF)(p,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{onLeft:Ce,onRight:we,"left-color":"blue-3","right-color":"blue-3"},{left:(0,a.k6)((()=>[(0,a.Lk)("div",I,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"red",icon:"delete",round:"",onClick:e=>ze(t),class:"q-mr-md"},null,8,["onClick"])],2),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col text-h5  text-center text-capitalize","bg-blue-3"))},(0,l.v_)(e.caption),3)])])),right:(0,a.k6)((()=>[(0,a.Lk)("div",H,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col text-h5 text-center text-capitalize q-mr-md","bg-blue-3"))},(0,l.v_)(e.caption),3),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"green",icon:"edit",round:"",onClick:e=>ue(t)},null,8,["onClick"])],2)])])),default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",D,[(0,a.Lk)("div",N,[(0,a.bF)(u,{flat:"","text-color":"green",icon:"drag_handle",class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"handle","bg-blue-2"))},null,8,["class"]),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"text-h5 col-grow self-stretch","bg-blue-3")),style:{overflow:"auto"}},(0,l.v_)(e.caption),3),(0,a.Lk)("div",z,[e.phone?((0,a.uX)(),(0,a.CE)("a",{key:0,href:`https://wa.me/${e.phone}`,target:"_blank",rel:"noopener noreferrer",style:{color:"inherit","text-decoration":"underline",cursor:"pointer"}},(0,l.v_)(void 0!==e.phone?e.phone.substring(0,4):"")+" "+(0,l.v_)(void 0!==e.phone?e.phone.substring(4):""),9,B)):((0,a.uX)(),(0,a.CE)("span",V))]),i[6]||(i[6]=(0,a.Lk)("div",{class:"flex-break"},null,-1)),(0,a.Lk)("div",M,(0,l.v_)(e.barcode),1),(0,a.Lk)("div",j,[(0,a.Lk)("div",$,(0,l.v_)(de(e.region))+(0,l.v_)(e.zone)+(0,l.v_)(e.team),1)])])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),(0,a.bF)(g),e.expended?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(k,{key:0,class:"q-pa-none",align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{flat:"","no-caps":"",onClick:e=>ie(t)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)("barcode"===(0,n.R1)(te).type?(0,n.R1)(oe)("barcode_showBarcode"):(0,n.R1)(oe)("barcode_showQrcode")),1)])),_:1},8,["onClick"])])),_:2},1024)),e.expended&&"barcode"===(0,n.R1)(te).type?((0,a.uX)(),(0,a.Wv)(f,{key:1,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",J,[(0,a.bF)((0,n.R1)(s.f),{value:e.barcode,width:2,height:80},null,8,["value"])])])),_:2},1032,["class"])):(0,a.Q3)("",!0),e.expended&&"qrcode"===(0,n.R1)(te).type?((0,a.uX)(),(0,a.Wv)(f,{key:2,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"q-pa-xs col text-center","bg-red-3"))},[(0,a.bF)((0,n.R1)(c.Ay),{value:e.barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:2},1032,["class"])):(0,a.Q3)("",!0)])),_:2},1024)])):(0,a.Q3)("",!0)])),_:1},8,["list"])]),(0,n.R1)(te).barcodePageDebug?((0,a.uX)(),(0,a.Wv)(R.A,{key:3,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,n.R1)(ae).barcodes,title:"db settings"},null,8,["value"])):(0,a.Q3)("",!0),(0,n.R1)(ne)?((0,a.uX)(),(0,a.CE)("div",{key:4,class:(0,l.C4)((0,n.R1)(r.y)((0,n.R1)(ne),"","bg-yellow-2"))},[(0,n.R1)(ne)?((0,a.uX)(),(0,a.CE)("p",U,[i[7]||(i[7]=(0,a.eW)(" Last result: ",-1)),(0,a.Lk)("b",null,(0,l.v_)(o.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(ne)?((0,a.uX)(),(0,a.CE)("p",G,[i[8]||(i[8]=(0,a.eW)(" Camera On: ",-1)),(0,a.Lk)("b",null,(0,l.v_)(Ee.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(ne)?((0,a.uX)(),(0,a.CE)("p",Y,[i[9]||(i[9]=(0,a.eW)(" Last Scan: ",-1)),(0,a.Lk)("b",null,(0,l.v_)(qe.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(ne)?((0,a.uX)(),(0,a.CE)("p",Z,[i[10]||(i[10]=(0,a.eW)(" Camera Off: ",-1)),(0,a.Lk)("b",null,(0,l.v_)(Fe.value),1)])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)])}}});var te=o(2968),oe=o(9039),ae=o(3341),le=o(222),ne=o(3766),re=o(5073),se=o(2589),ce=o(6915),ie=o(5034),de=o(272),ue=o.n(de);const ve=(0,te.A)(ee,[["__scopeId","data-v-74f48aa7"]]),be=ve;ue()(ee,"components",{QBtn:oe.A,QCard:ae.A,QCardSection:le.A,QList:ne.A,QSlideItem:re.A,QItem:se.A,QSeparator:ce.A,QCardActions:ie.A});const pe=(0,a.pM)({name:"BarcodePage",__name:"barcodePage",setup(e){return(e,t)=>{const o=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(o,null,{default:(0,a.k6)((()=>[(0,a.bF)(be)])),_:1})}}});var fe=o(5013);const ge=pe,ke=ge;ue()(pe,"components",{QPage:fe.A})}}]);