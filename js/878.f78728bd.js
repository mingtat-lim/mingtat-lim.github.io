"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[878],{2875:(e,l,o)=>{function n(e,l,o){return e?`${l} ${o}`:l}o.d(l,{$:()=>n})},9878:(e,l,o)=>{o.r(l),o.d(l,{default:()=>B});var n=o(9835),t=o(499),a=o(6970),i=o(1957),s=o(9302),c=o(2875),d=function(e,l,o,n){function t(e){return e instanceof o?e:new o((function(l){l(e)}))}return new(o||(o=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(l){a(l)}}function s(e){try{c(n["throw"](e))}catch(l){a(l)}}function c(e){e.done?o(e.value):t(e.value).then(i,s)}c((n=n.apply(e,l||[])).next())}))};const r={class:"col item-stretch"},u={class:"row items-center"},g={class:"text-h4 col-8 text-center"},p={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},m={class:"q-pa-xs"},v={key:1,xclass:"q-pt-md"},k={class:"row items-center"},w=(0,n._)("div",{class:"text-h4 col-8 text-center"},"慈济活动",-1),f={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},h={class:"col bg-blue-2"},y={class:"row items-center"},S={class:""},_={class:"text-subtitle1"},C={class:"col text-right q-gutter-xs self-center",style:{"min-width":"100px","max-width":"100px"}},x={class:""},b={class:"text-right q-gutter-xs self-center"},q={class:"row"},O={key:0,class:"row"},U={key:0},V={class:"col q-pa-xs"},T=!1,W="events",$=(0,n.aZ)({__name:"AddEvent",setup(e){const l=(0,s.Z)(),o=(0,t.iH)(Array());if(null!==l.localStorage.getItem(W)){T&&console.log("parse",l.localStorage.getItem(W));const e=JSON.parse(l.localStorage.getItem(W)+"");e.forEach((e=>{if(o.value.push(e),T){if("十月份半曰精进日"===e.event){const l={title:"精进日交通安排",message:"集合时间及地点和巴士车站",options:["无需安排交通","5:30am 武吉甘柏地铁站","5:30am 巴士站, Opp 461C, 武吉巴督西大道 6","5:30am 巴士站, Opp 451A, 武吉巴督西大道 6","5:40am West Mall 交通圈","5:45am 武吉巴督 230A, 武吉巴督 21 街","5:45am 巴士站, Opp Blk 19, Jln Jurong Kechil"]};e.option=l}if("S22 十月份慈善关怀曰"===e.event){const l={title:"慈善关怀曰",message:"请选择日期以及您是否是司机菩萨",options:["2023/10/07 - 司机菩萨","2023/10/08 - 司机菩萨","2023/10/07","2023/10/08"]};e.option=l}}}))}let $=(0,t.iH)("list");const D=(0,t.iH)({event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1});function Z(e,n){var t,a;T&&console.log("signupHandler",e,n);const i=o.value[e],s=H(i);s?n?l.dialog({title:null===(t=i.option)||void 0===t?void 0:t.title,message:null===(a=i.option)||void 0===a?void 0:a.message,options:{type:s.type,model:s.model,items:s.items},cancel:!0,persistent:!0}).onOk((e=>{var o;T&&console.log(">>>> OK, received",e),i.isSignup=!0,i.signupOption=null===(o=i.option)||void 0===o?void 0:o.options[e],z(),l.notify({message:`报名成功! ${i.event}`,color:"green-6"})})).onCancel((()=>{T&&console.log(">>>> Cancel"),l.notify({message:`报名不成功! ${i.event}`,color:"red-6"})})).onDismiss((()=>{T&&console.log("I am triggered on both OK and Cancel")})):(T&&console.log("退出报名",e,n),l.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${i.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{T&&console.log("OK"),i.isSignup=n,i.signupOption=void 0,z(),l.notify({message:`退出活动成功! ${i.event}`,color:"red",icon:"warning"})})).onCancel((()=>{T&&console.log("Cancel")})).onDismiss((()=>{T&&console.log("I am triggered on both OK and Cancel")}))):n?(i.isSignup=n,z(),l.notify({message:`报名成功! ${i.event}`,color:"green-6"})):l.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${i.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{T&&console.log("OK"),i.isSignup=n,i.signupOption=void 0,z(),l.notify({message:`退出活动成功! ${i.event}`,color:"red",icon:"warning"})})).onCancel((()=>{T&&console.log("Cancel")})).onDismiss((()=>{T&&console.log("I am triggered on both OK and Cancel")}))}function H(e){if(e.option){const l={type:"radio",model:"0",items:[]};return e.option.options.forEach(((e,o)=>{var n;null===(n=l.items)||void 0===n||n.push({label:e,value:o.toString()})})),l}}function Q(e){T&&console.log("checkinHandler",e)}function j(e){T&&console.log("selectHandler",e),D.value=o.value[e],$.value="edit"}function E(){T&&console.log("updateHandler"),l.localStorage.set(W,JSON.stringify(o.value)),$.value="list"}function I(){T&&console.log("cancelHandler"),$.value="list"}function J(e){T&&console.log("showBarcode");const l=!e.expanded;o.value.forEach((e=>e.expanded=!1)),e.expanded=l}function K(e){T&&console.log("deleteHandler",e),l.dialog({title:"Confirm",message:`Are you sure you want to delete the selected row (id: ${o.value[e].event})?`,cancel:!0,persistent:!0}).onOk((()=>d(this,void 0,void 0,(function*(){o.value=[...o.value.slice(0,e),...o.value.slice(e+1)],l.localStorage.set(W,JSON.stringify(o.value)),l.notify("Record deleted")}))))}function N(){D.value={event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1},$.value="add"}function A(){o.value.push(D.value),l.localStorage.set(W,JSON.stringify(o.value)),$.value="list"}function z(){T&&console.log("saveData"),l.localStorage.set(W,JSON.stringify(o.value))}return(e,l)=>{const s=(0,n.up)("q-btn"),d=(0,n.up)("q-input"),W=(0,n.up)("q-icon"),H=(0,n.up)("q-card-section"),z=(0,n.up)("q-chip"),F=(0,n.up)("q-space"),B=(0,n.up)("q-card-actions"),R=(0,n.up)("q-slide-transition"),P=(0,n.up)("q-card"),L=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(L,{class:"q-pa-xs"},{default:(0,n.w5)((()=>[(0,n._)("div",r,[["add","edit"].includes((0,t.SU)($))?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,a.C_)((0,t.SU)(c.$)(T,"","bg-blue-2"))},[(0,n._)("div",u,[(0,n._)("div",g,(0,a.zw)("add"===(0,t.SU)($)?"Add New":"Edit"),1),(0,n._)("div",p,["add"===(0,t.SU)($)?((0,n.wg)(),(0,n.j4)(s,{key:0,icon:"save",color:"green",round:"",onClick:A})):(0,n.kq)("",!0),"edit"===(0,t.SU)($)?((0,n.wg)(),(0,n.j4)(s,{key:1,icon:"update",color:"green",round:"",onClick:E})):(0,n.kq)("",!0),["add","edit"].includes((0,t.SU)($))?((0,n.wg)(),(0,n.j4)(s,{key:2,icon:"cancel",color:"green",round:"",onClick:I})):(0,n.kq)("",!0)])]),(0,n._)("div",m,[(0,n.Wm)(d,{modelValue:D.value.event,"onUpdate:modelValue":l[0]||(l[0]=e=>D.value.event=e),label:"Event Name",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,n.Wm)(d,{modelValue:D.value.eventDate,"onUpdate:modelValue":l[1]||(l[1]=e=>D.value.eventDate=e),label:"Date",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,n._)("div",{class:(0,a.C_)((0,t.SU)(c.$)(T,"row q-col-gutter-sm","bg-yellow-2"))},[(0,n.Wm)(d,{modelValue:D.value.startTime,"onUpdate:modelValue":l[2]||(l[2]=e=>D.value.startTime=e),label:"Start Time",class:(0,a.C_)((0,t.SU)(c.$)(T,"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"]),(0,n.Wm)(d,{modelValue:D.value.endTime,"onUpdate:modelValue":l[3]||(l[3]=e=>D.value.endTime=e),label:"End Time",class:(0,a.C_)((0,t.SU)(c.$)(T,"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"])],2),(0,n.Wm)(d,{modelValue:D.value.location,"onUpdate:modelValue":l[4]||(l[4]=e=>D.value.location=e),label:"Location",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"])])],2)):(0,n.kq)("",!0),null!==o.value&&"list"===(0,t.SU)($)?((0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",k,[w,(0,n._)("div",f,[(0,n.Wm)(s,{icon:"add",color:"green",round:"",onClick:N})])]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.value,((e,l)=>((0,n.wg)(),(0,n.j4)(P,{class:"q-pa-xs",key:l},{default:(0,n.w5)((()=>[(0,n.Wm)(H,{class:"row text-h5 q-pa-none"},{default:(0,n.w5)((()=>[(0,n._)("div",h,[(0,n._)("div",y,[e.isSignup?((0,n.wg)(),(0,n.j4)(W,{key:0,name:"check_circle",color:"green",class:""})):(0,n.kq)("",!0),(0,n._)("div",S,(0,a.zw)(e.event),1)]),(0,n._)("div",_,(0,a.zw)(e.eventDate),1)]),(0,n._)("div",C,[(0,n.Wm)(s,{icon:"edit",color:"green",round:"",onClick:e=>j(l)},null,8,["onClick"]),(0,n.Wm)(s,{icon:"delete",color:"green",round:"",onClick:e=>K(l)},null,8,["onClick"])])])),_:2},1024),(0,n.Wm)(B,{class:"row q-pa-none text-subtitle2"},{default:(0,n.w5)((()=>[e.isSignup?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(z,{key:0,clickable:"",color:"green","text-color":"white",onClick:e=>Z(l,!0)},{default:(0,n.w5)((()=>[(0,n.Uk)("报名")])),_:2},1032,["onClick"])),e.isSignup?((0,n.wg)(),(0,n.j4)(z,{key:1,clickable:"",color:"red","text-color":"white",onClick:e=>Z(l,!1)},{default:(0,n.w5)((()=>[(0,n.Uk)("退出")])),_:2},1032,["onClick"])):(0,n.kq)("",!0),(0,n.Wm)(z,{clickable:"",color:"green","text-color":"white",onClick:e=>Q(l)},{default:(0,n.w5)((()=>[(0,n.Uk)("签到")])),_:2},1032,["onClick"]),(0,n.Wm)(F),(0,n._)("div",x,(0,a.zw)(e.expanded?"隐藏":"显示")+"详细资料",1),(0,n._)("div",b,[(0,n.Wm)(s,{color:"green",flat:"",dense:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:l=>J(e)},null,8,["icon","onClick"])])])),_:2},1024),(0,n.Wm)(R,null,{default:(0,n.w5)((()=>[(0,n.wy)((0,n._)("div",q,[(0,n.Wm)(d,{modelValue:e.startTime,"onUpdate:modelValue":l=>e.startTime=l,label:"Start Time",readonly:"",class:(0,a.C_)((0,t.SU)(c.$)(T,"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),(0,n.Wm)(d,{modelValue:e.endTime,"onUpdate:modelValue":l=>e.endTime=l,label:"End Time",readonly:"",class:(0,a.C_)((0,t.SU)(c.$)(T,"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),e.signupOption?((0,n.wg)(),(0,n.iD)("div",O,(0,a.zw)(e.signupOption),1)):(0,n.kq)("",!0)],512),[[i.F8,e.expanded]])])),_:2},1024)])),_:2},1024)))),128)),T?((0,n.wg)(),(0,n.iD)("div",U,[(0,n._)("pre",V,(0,a.zw)(JSON.stringify(o.value,null,4)),1)])):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])])),_:1})}}});var D=o(9885),Z=o(4455),H=o(7471),Q=o(4458),j=o(3190),E=o(2857),I=o(136),J=o(1821),K=o(7691),N=o(9003),A=o(9984),z=o.n(A);const F=$,B=F;z()($,"components",{QPage:D.Z,QBtn:Z.Z,QInput:H.Z,QCard:Q.Z,QCardSection:j.Z,QIcon:E.Z,QSpace:I.Z,QCardActions:J.Z,QChip:K.Z,QSlideTransition:N.Z})}}]);