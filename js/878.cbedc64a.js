"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[878],{2875:(e,t,o)=>{function l(e,t,o){return e?`${t} ${o}`:t}o.d(t,{$:()=>l})},2620:(e,t,o)=>{o.d(t,{d:()=>l});class l{constructor(e){this._settings={isAdmin:!1,globalDebug:!1,homePageDebug:!1,barCodePageDebug:!1,qrCodePageDebug:!1,profilePageDebug:!1,memberPageDebug:!1,eventsPageDebug:!1,scanCodePageDebug:!1,geolocationPageDebug:!1,settingsPageDebug:!1},this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._settings=Object.assign(Object.assign({},this._settings),t)}saveSettings(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){return this._settings}get isAdmin(){return this._settings.isAdmin}set isAdmin(e){this._settings.isAdmin=e}get globalDebug(){return this._settings.globalDebug}set globalDebug(e){this._settings.globalDebug=e}get eventsPageDebug(){return this._settings.eventsPageDebug}set eventsPageDebug(e){this._settings.eventsPageDebug=e}get barCodePageDebug(){return this._settings.barCodePageDebug}set barCodePageDebug(e){this._settings.barCodePageDebug=e}get geolocationPageDebug(){return this._settings.geolocationPageDebug}set geolocationPageDebug(e){this._settings.geolocationPageDebug=e}get homePageDebug(){return this._settings.homePageDebug}set homePageDebug(e){this._settings.homePageDebug=e}get memberPageDebug(){return this._settings.memberPageDebug}set memberPageDebug(e){this._settings.memberPageDebug=e}get profilePageDebug(){return this._settings.profilePageDebug}set profilePageDebug(e){this._settings.profilePageDebug=e}get qrCodePageDebug(){return this._settings.qrCodePageDebug}set qrCodePageDebug(e){this._settings.qrCodePageDebug=e}get scanCodePageDebug(){return this._settings.scanCodePageDebug}set scanCodePageDebug(e){this._settings.scanCodePageDebug=e}get settingsPageDebug(){return this._settings.settingsPageDebug}set settingsPageDebug(e){this._settings.settingsPageDebug=e}}},9878:(e,t,o)=>{o.r(t),o.d(t,{default:()=>B});var l=o(9835),n=o(499),s=o(6970),a=o(1957),i=o(2620),g=o(9302),c=o(2875),r=o(226),u=function(e,t,o,l){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,s){function a(e){try{g(l.next(e))}catch(t){s(t)}}function i(e){try{g(l["throw"](e))}catch(t){s(t)}}function g(e){e.done?o(e.value):n(e.value).then(a,i)}g((l=l.apply(e,t||[])).next())}))};const d={class:"col item-stretch"},m={class:"row items-center"},p={class:"text-h4 col-8 text-center"},v={class:"text-h4 col-4 text-right q-pa-sm q-gutter-xs"},b={class:"q-pa-xs"},h={key:1,xclass:"q-pt-md"},_={class:"row items-center q-pa-xs q-ma-sm q-mb-md"},f={class:"row items-center"},D={class:""},w={class:"text-subtitle1"},S={key:0,class:"col text-right q-gutter-xs self-center",style:{"min-width":"100px","max-width":"100px"}},C={class:""},k={class:"text-right q-gutter-xs self-center"},y={class:"row"},P={key:0,class:"row"},q={class:"col"},U={key:0},x={class:"col q-pa-xs"},O="events",V=(0,l.aZ)({__name:"AddEvent",setup(e){const t=(0,g.Z)(),o=new i.d(t),V=o.globalDebug||o.eventsPageDebug,T=o.isAdmin,$=(0,n.iH)(Array());if(null!==t.localStorage.getItem(O)){V&&console.log("parse",t.localStorage.getItem(O));const e=JSON.parse(t.localStorage.getItem(O)+"");e.forEach(((e,t)=>{if($.value.push(e),0===t){const t={title:"精进日交通安排",message:"集合时间及地点和巴士车站",options:["无需安排交通","5:30am 武吉甘柏地铁站","5:30am 巴士站, Opp 461C, 武吉巴督西大道 6","5:30am 巴士站, Opp 451A, 武吉巴督西大道 6","5:40am West Mall 交通圈","5:45am 武吉巴督 230A, 武吉巴督 21 街","5:45am 巴士站, Opp Blk 19, Jln Jurong Kechil"]};e.option=t}if(3===t){const t={title:"慈善关怀曰",message:"请选择日期以及您是否是司机菩萨",options:["2023/10/08(周日)","2023/10/08(周日) - 司机菩萨","2023/10/07(周六)","2023/10/07(周六) - 司机菩萨"]};e.option=t}}))}let Q=(0,n.iH)("list");const W=(0,n.iH)({event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1});function E(e){var t;V&&console.log("showQrCodeHandler",e);const o=$.value[e];o.showQrCode=null!==(t=o.showQrCode)&&void 0!==t&&t;const l=!o.showQrCode;$.value.forEach((e=>e.showQrCode=!1)),o.showQrCode=l}function A(e){V&&console.log("formatQrCodeData",e);const t=$.value[e],o={event:decodeURIComponent(t.event),eventId:"SG1234",lat:1.3507159,lon:103.7359513};return JSON.stringify(o)}function I(e,o){var l,n;V&&console.log("signupHandler",e,o);const s=$.value[e],a=K(s);a?o?t.dialog({title:null===(l=s.option)||void 0===l?void 0:l.title,message:null===(n=s.option)||void 0===n?void 0:n.message,options:{type:a.type,model:a.model,items:a.items},cancel:!0,persistent:!0}).onOk((e=>{var o;V&&console.log(">>>> OK, received",e),s.isSignup=!0,s.signupOption=null===(o=s.option)||void 0===o?void 0:o.options[e],Y(),t.notify({message:`报名成功! ${s.event}`,color:"green-6"})})).onCancel((()=>{V&&console.log(">>>> Cancel"),t.notify({message:`报名不成功! ${s.event}`,color:"red-6"})})).onDismiss((()=>{V&&console.log("I am triggered on both OK and Cancel")})):(V&&console.log("退出报名",e,o),t.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${s.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{V&&console.log("OK"),s.isSignup=o,s.signupOption=void 0,Y(),t.notify({message:`退出活动成功! ${s.event}`,color:"red",icon:"warning"})})).onCancel((()=>{V&&console.log("Cancel")})).onDismiss((()=>{V&&console.log("I am triggered on both OK and Cancel")}))):o?(s.isSignup=o,Y(),t.notify({message:`报名成功! ${s.event}`,color:"green-6"})):t.dialog({title:"确认",message:`请确认您是否要退出此活动 <strong>${s.event}</strong>?`,html:!0,cancel:!0,persistent:!0}).onOk((()=>{V&&console.log("OK"),s.isSignup=o,s.signupOption=void 0,Y(),t.notify({message:`退出活动成功! ${s.event}`,color:"red",icon:"warning"})})).onCancel((()=>{V&&console.log("Cancel")})).onDismiss((()=>{V&&console.log("I am triggered on both OK and Cancel")}))}function K(e){if(e.option){const t={type:"radio",model:"0",items:[]};return e.option.options.forEach(((e,o)=>{var l;null===(l=t.items)||void 0===l||l.push({label:e,value:o.toString()})})),t}}function N(e){V&&console.log("checkinHandler",e)}function Z(e){V&&console.log("selectHandler",e),W.value=$.value[e],Q.value="edit"}function H(){V&&console.log("updateHandler"),t.localStorage.set(O,JSON.stringify($.value)),Q.value="list"}function J(){V&&console.log("cancelHandler"),Q.value="list"}function j(e){V&&console.log("showBarcode");const t=!e.expanded;$.value.forEach((e=>e.expanded=!1)),e.expanded=t}function B(e){V&&console.log("deleteHandler",e),t.dialog({title:"Confirm",message:`Are you sure you want to delete the selected row (id: ${$.value[e].event})?`,cancel:!0,persistent:!0}).onOk((()=>u(this,void 0,void 0,(function*(){$.value=[...$.value.slice(0,e),...$.value.slice(e+1)],t.localStorage.set(O,JSON.stringify($.value)),t.notify("Record deleted")}))))}function F(){W.value={event:"",eventDate:"",startTime:"",endTime:"",location:"",option:void 0,isSignup:!1,isRegister:!1,expanded:!1},Q.value="add"}function z(){$.value.push(W.value),t.localStorage.set(O,JSON.stringify($.value)),Q.value="list"}function Y(){V&&console.log("saveData"),t.localStorage.set(O,JSON.stringify($.value))}return(e,t)=>{const o=(0,l.up)("q-btn"),i=(0,l.up)("q-input"),g=(0,l.up)("q-icon"),u=(0,l.up)("q-card-section"),O=(0,l.up)("q-chip"),K=(0,l.up)("q-space"),Y=(0,l.up)("q-card-actions"),R=(0,l.up)("q-slide-transition"),G=(0,l.up)("q-card"),L=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(L,{class:"q-pa-xs"},{default:(0,l.w5)((()=>[(0,l._)("div",d,[["add","edit"].includes((0,n.SU)(Q))?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"","bg-blue-2"))},[(0,l._)("div",m,[(0,l._)("div",p,(0,s.zw)("add"===(0,n.SU)(Q)?"Add New":"Edit"),1),(0,l._)("div",v,["add"===(0,n.SU)(Q)?((0,l.wg)(),(0,l.j4)(o,{key:0,icon:"save",color:"green",round:"",onClick:z})):(0,l.kq)("",!0),"edit"===(0,n.SU)(Q)?((0,l.wg)(),(0,l.j4)(o,{key:1,icon:"update",color:"green",round:"",onClick:H})):(0,l.kq)("",!0),["add","edit"].includes((0,n.SU)(Q))?((0,l.wg)(),(0,l.j4)(o,{key:2,icon:"cancel",color:"green",round:"",onClick:J})):(0,l.kq)("",!0)])]),(0,l._)("div",b,[(0,l.Wm)(i,{modelValue:W.value.event,"onUpdate:modelValue":t[0]||(t[0]=e=>W.value.event=e),label:"Event Name",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,l.Wm)(i,{modelValue:W.value.eventDate,"onUpdate:modelValue":t[1]||(t[1]=e=>W.value.eventDate=e),label:"Date",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,l._)("div",{class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"row q-col-gutter-sm","bg-yellow-2"))},[(0,l.Wm)(i,{modelValue:W.value.startTime,"onUpdate:modelValue":t[2]||(t[2]=e=>W.value.startTime=e),label:"Start Time",class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"]),(0,l.Wm)(i,{modelValue:W.value.endTime,"onUpdate:modelValue":t[3]||(t[3]=e=>W.value.endTime=e),label:"End Time",class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col-6","bg-red-2")),rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","class","rules"])],2),(0,l.Wm)(i,{modelValue:W.value.location,"onUpdate:modelValue":t[4]||(t[4]=e=>W.value.location=e),label:"Location",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"])])],2)):(0,l.kq)("",!0),null!==$.value&&"list"===(0,n.SU)(Q)?((0,l.wg)(),(0,l.iD)("div",h,[(0,l._)("div",_,[(0,l._)("div",{class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col text-h4 text-center","bg-green-2"))},"慈济活动",2),(0,n.SU)(T)?((0,l.wg)(),(0,l.iD)("div",{key:0,class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"text-h4 text-right q-gutter-xs","bg-red-4")),style:{"min-width":"50px","max-width":"50px"}},[(0,l.Wm)(o,{icon:"add",color:"green",round:"",onClick:F})],2)):(0,l.kq)("",!0)]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)($.value,((e,t)=>((0,l.wg)(),(0,l.j4)(G,{class:"q-pa-xs q-ma-sm q-mb-md",key:t},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{class:"row text-h5 q-pa-none"},{default:(0,l.w5)((()=>[(0,l._)("div",{class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col","bg-blue-2"))},[(0,l._)("div",f,[e.isSignup?((0,l.wg)(),(0,l.j4)(g,{key:0,name:"check_circle",color:"green",class:""})):(0,l.kq)("",!0),(0,l._)("div",D,(0,s.zw)(e.event),1)]),(0,l._)("div",w,(0,s.zw)(e.eventDate),1)],2),(0,n.SU)(T)?((0,l.wg)(),(0,l.iD)("div",S,[(0,l.Wm)(o,{icon:"edit",color:"green",round:"",onClick:e=>Z(t)},null,8,["onClick"]),(0,l.Wm)(o,{icon:"delete",color:"green",round:"",onClick:e=>B(t)},null,8,["onClick"])])):(0,l.kq)("",!0)])),_:2},1024),(0,l.Wm)(Y,{class:"row q-pa-none text-subtitle2"},{default:(0,l.w5)((()=>[e.isSignup?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(O,{key:0,clickable:"",color:"green","text-color":"white",onClick:e=>I(t,!0)},{default:(0,l.w5)((()=>[(0,l.Uk)("报名")])),_:2},1032,["onClick"])),e.isSignup?((0,l.wg)(),(0,l.j4)(O,{key:1,clickable:"",color:"red","text-color":"white",onClick:e=>I(t,!1)},{default:(0,l.w5)((()=>[(0,l.Uk)("退出")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(O,{clickable:"",color:"green","text-color":"white",onClick:e=>N(t)},{default:(0,l.w5)((()=>[(0,l.Uk)("签到")])),_:2},1032,["onClick"]),(0,n.SU)(T)?((0,l.wg)(),(0,l.j4)(O,{key:2,clickable:"",color:"blue","text-color":"white",onClick:e=>E(t)},{default:(0,l.w5)((()=>[(0,l.Uk)("签到 QR")])),_:2},1032,["onClick"])):(0,l.kq)("",!0),(0,l.Wm)(K),(0,l._)("div",C,(0,s.zw)(e.expanded?"隐藏":"显示")+"资料",1),(0,l._)("div",k,[(0,l.Wm)(o,{color:"green",flat:"",dense:"",icon:e.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:t=>j(e)},null,8,["icon","onClick"])])])),_:2},1024),(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",y,[(0,l.Wm)(i,{modelValue:e.startTime,"onUpdate:modelValue":t=>e.startTime=t,label:"Start Time",readonly:"",class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),(0,l.Wm)(i,{modelValue:e.endTime,"onUpdate:modelValue":t=>e.endTime=t,label:"End Time",readonly:"",class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"col-6","bg-red-2"))},null,8,["modelValue","onUpdate:modelValue","class"]),e.signupOption?((0,l.wg)(),(0,l.iD)("div",P,(0,s.zw)(e.signupOption),1)):(0,l.kq)("",!0)],512),[[a.F8,e.expanded]])])),_:2},1024),(0,l.Wm)(R,null,{default:(0,l.w5)((()=>[(0,l.wy)((0,l._)("div",null,[(0,l._)("div",q,[(0,l._)("div",{class:(0,s.C_)((0,n.SU)(c.$)((0,n.SU)(V),"text-center","bg-yellow-2"))},[(0,l.Wm)((0,n.SU)(r.ZP),{value:A(t),type:"image/png",color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])],512),[[a.F8,e.showQrCode]])])),_:2},1024)])),_:2},1024)))),128)),(0,n.SU)(V)?((0,l.wg)(),(0,l.iD)("div",U,[(0,l._)("pre",x,(0,s.zw)(JSON.stringify($.value,null,4)),1)])):(0,l.kq)("",!0)])):(0,l.kq)("",!0)])])),_:1})}}});var T=o(9885),$=o(4455),Q=o(7471),W=o(4458),E=o(3190),A=o(2857),I=o(136),K=o(1821),N=o(7691),Z=o(9003),H=o(9984),J=o.n(H);const j=V,B=j;J()(V,"components",{QPage:T.Z,QBtn:$.Z,QInput:Q.Z,QCard:W.Z,QCardSection:E.Z,QIcon:A.Z,QSpace:I.Z,QCardActions:K.Z,QChip:N.Z,QSlideTransition:Z.Z})}}]);