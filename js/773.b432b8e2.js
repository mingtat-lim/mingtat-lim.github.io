"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[773],{2875:(e,t,a)=>{function n(e,t,a){return e?`${t} ${a}`:t}a.d(t,{$:()=>n})},2620:(e,t,a)=>{a.d(t,{d:()=>n});class n{constructor(e){this._settings={isAdmin:!1,globalDebug:!1,homePageDebug:!1,barCodePageDebug:!1,qrCodePageDebug:!1,profilePageDebug:!1,memberPageDebug:!1,eventsPageDebug:!1,scanCodePageDebug:!1,geolocationPageDebug:!1,settingsPageDebug:!1},this.DB_KEY="SETTINGS",this._local=e.localStorage,null===this._local.getItem(this.DB_KEY)&&this._local.set(this.DB_KEY,JSON.stringify(this.getState()));const t=JSON.parse(this._local.getItem(this.DB_KEY)+"");this._settings=Object.assign(Object.assign({},this._settings),t)}saveSettings(){this._local.set(this.DB_KEY,JSON.stringify(this.getState()))}getState(){return this._settings}get isAdmin(){return this._settings.isAdmin}set isAdmin(e){this._settings.isAdmin=e}get globalDebug(){return this._settings.globalDebug}set globalDebug(e){this._settings.globalDebug=e}get eventsPageDebug(){return this._settings.eventsPageDebug}set eventsPageDebug(e){this._settings.eventsPageDebug=e}get barCodePageDebug(){return this._settings.barCodePageDebug}set barCodePageDebug(e){this._settings.barCodePageDebug=e}get geolocationPageDebug(){return this._settings.geolocationPageDebug}set geolocationPageDebug(e){this._settings.geolocationPageDebug=e}get homePageDebug(){return this._settings.homePageDebug}set homePageDebug(e){this._settings.homePageDebug=e}get memberPageDebug(){return this._settings.memberPageDebug}set memberPageDebug(e){this._settings.memberPageDebug=e}get profilePageDebug(){return this._settings.profilePageDebug}set profilePageDebug(e){this._settings.profilePageDebug=e}get qrCodePageDebug(){return this._settings.qrCodePageDebug}set qrCodePageDebug(e){this._settings.qrCodePageDebug=e}get scanCodePageDebug(){return this._settings.scanCodePageDebug}set scanCodePageDebug(e){this._settings.scanCodePageDebug=e}get settingsPageDebug(){return this._settings.settingsPageDebug}set settingsPageDebug(e){this._settings.settingsPageDebug=e}}},1435:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(9835),i=a(1265);const l={name:"BarcodeGenerator",props:{value:[String,Number],format:[String],width:[String,Number],height:[String,Number],displayValue:{type:[String,Boolean],default:!0},text:[String,Number],fontOptions:[String],font:[String],textAlign:[String],textPosition:[String],textMargin:[String,Number],fontSize:[String,Number],background:[String],lineColor:[String],margin:[String,Number],marginTop:[String,Number],marginBottom:[String,Number],marginLeft:[String,Number],marginRight:[String,Number],flat:[Boolean],ean128:[String,Boolean],elementTag:{type:String,default:"svg",validator:function(e){return-1!==["canvas","svg","img"].indexOf(e)}}},render(){return(0,n.h)(this.elementTag,{id:["barcodegen"]})},mounted:function(){s.call(this)}};function s(){this.value;var e={format:this.format,width:this.width,height:this.height,displayValue:this.displayValue,text:this.text,fontOptions:this.fontOptions,font:this.font,textAlign:this.textAlign,textPosition:this.textPosition,textMargin:this.textMargin,fontSize:this.fontSize,background:this.background,lineColor:this.lineColor,margin:this.margin,marginTop:this.marginTop,marginBottom:this.marginBottom,marginLeft:this.marginLeft,marginRight:this.marginRight,flat:this.flat,ean128:this.ean128,valid:function(e){e},elementTag:this.elementTag};o(e),i(this.$el,this.value,e)}function o(e){Object.keys(e).forEach((t=>void 0===e[t]?delete e[t]:{}))}const g=l,r=g},5773:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var n=a(9835),i=a(6970),l=a(499),s=a(6009),o=a(1435),g=a(2875),r=a(9302),u=a(2620),c=a(2988);const m={class:"col item-stretch"},d={key:0,class:"error"},b={class:"row text-center"},h={class:"col items-center",style:{width:"300px",height:"300px"}},v={class:"col text-center"},S={key:0},_={key:0,class:"decode-result"},D={key:1,class:"decode-result"},f={key:2,class:"decode-result"},p={key:3,class:"decode-result"},P="volunteerNo",w="name",C=(0,n.aZ)({__name:"BarCode",setup(e){const t=(0,r.Z)(),a=new u.d(t),C=a.globalDebug||a.barCodePageDebug,k=(0,l.iH)(`${t.localStorage.getItem(P)}`),U=(0,l.iH)(`${t.localStorage.getItem(w)}`),y=(0,l.iH)("off"),x=(0,l.iH)(),q=(0,l.iH)(),N=(0,l.iH)(),T=(0,l.iH)(),O=(0,l.iH)(),E=(0,l.iH)();function V(e){C&&console.log("onDetect",e);const t=e,[a]=t;let n;if(C&&console.log(a.rawValue),a.rawValue.startsWith("{")){const e=JSON.parse(a.rawValue);e.name=decodeURIComponent(e.name+""),T.value=e.eventId,N.value=e.event,O.value=e.lat,E.value=e.lon,n=JSON.stringify(e)}else n=a.rawValue;q.value=n,j(),I.value=c.ou.now().toISO(),Z()}function $(){t.notify({message:`${U.value} 签到成功!`,color:"green-6"}),q.value=void 0}function H(){q.value=void 0}let z;const I=(0,l.iH)(),B=(0,l.iH)(),A=(0,l.iH)();function W(){clearTimeout(z),z=setTimeout((()=>{C&&console.log("cameraOffTimer"),Z(),A.value=c.ou.now().toISO()}),1e4)}function L(){C&&console.log("onCameraHandler"),y.value="auto",B.value=c.ou.now().toISO(),I.value="",A.value="",W()}function Z(){C&&console.log("offCameraHandler"),y.value="off"}function j(){let e=new Audio("/censor-beep-01.mp3");e.play()}function J(e){C&&console.log("onErrorHandler",e),x.value=`[${e.name}]: `,"NotAllowedError"===e.name?x.value+="you need to grant camera access permission":"NotFoundError"===e.name?x.value+="no camera on this device":"NotSupportedError"===e.name?x.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?x.value+="is the camera already in use?":"OverconstrainedError"===e.name?x.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?x.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?x.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":x.value+=e.message}return(e,t)=>{const a=(0,n.up)("q-chip"),r=(0,n.up)("q-input"),u=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(u,{class:"q-pa-sm"},{default:(0,n.w5)((()=>[(0,n._)("div",m,[(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"","bg-red-2"))},[(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"text-h4 text-center","bg-yellow-6"))},(0,i.zw)(U.value),3),(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"text-center","bg-yellow-2"))},[(0,n.Wm)(o.Z,{value:k.value,margin:0,width:1.5,height:100,format:"CODE39",lineColor:"black",elementTag:"canvas"},null,8,["value"])],2)],2),(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"text-center","bg-blue-2"))},[(0,n.Wm)(a,{clickable:"",color:"green","text-color":"white",size:"lg",onClick:L},{default:(0,n.w5)((()=>[(0,n.Uk)("自助签到")])),_:1}),(0,n.Wm)(a,{clickable:"",color:"green","text-color":"white",size:"lg",onClick:L},{default:(0,n.w5)((()=>[(0,n.Uk)("工作人员 自助签到")])),_:1})],2),"auto"===y.value?((0,n.wg)(),(0,n.iD)("div",{key:0,class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"text-center","bg-green-2"))},[x.value?((0,n.wg)(),(0,n.iD)("div",d,(0,i.zw)(x.value),1)):(0,n.kq)("",!0),(0,n._)("div",b,[(0,n._)("div",h,["auto"===y.value?((0,n.wg)(),(0,n.j4)((0,l.SU)(s.vG),{key:0,onDetect:V,onError:J,camera:y.value},null,8,["camera"])):(0,n.kq)("",!0)])])],2)):(0,n.kq)("",!0),q.value?((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"","bg-green-2"))},[(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"row q-col-gutter-sm","bg-yellow-2"))},[(0,n.Wm)(r,{modelValue:T.value,"onUpdate:modelValue":t[0]||(t[0]=e=>T.value=e),label:"Event ID",readonly:""},null,8,["modelValue"]),(0,n.Wm)(r,{modelValue:N.value,"onUpdate:modelValue":t[1]||(t[1]=e=>N.value=e),label:"Event",readonly:""},null,8,["modelValue"])],2),(0,n._)("div",{class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"row q-col-gutter-sm","bg-yellow-2"))},[(0,n.Wm)(r,{modelValue:O.value,"onUpdate:modelValue":t[2]||(t[2]=e=>O.value=e),label:"Latitude",readonly:"",class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"","bg-red-2"))},null,8,["modelValue","class"]),(0,n.Wm)(r,{modelValue:E.value,"onUpdate:modelValue":t[3]||(t[3]=e=>E.value=e),label:"Longitude",readonly:"",class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"","bg-red-2"))},null,8,["modelValue","class"])],2),(0,n._)("div",null,[(0,n._)("div",v,[(0,n.Wm)(a,{clickable:"",color:"green","text-color":"white",size:"lg",onClick:$},{default:(0,n.w5)((()=>[(0,n.Uk)("确认")])),_:1}),(0,n.Wm)(a,{clickable:"",color:"green","text-color":"white",size:"lg",onClick:H},{default:(0,n.w5)((()=>[(0,n.Uk)("取消")])),_:1})])]),(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("pre",S,(0,i.zw)(q.value),1)):(0,n.kq)("",!0)],2)):(0,n.kq)("",!0),(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("div",{key:2,class:(0,i.C_)((0,l.SU)(g.$)((0,l.SU)(C),"","bg-yellow-2"))},[(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("p",_,[(0,n.Uk)(" Last result: "),(0,n._)("b",null,(0,i.zw)(q.value),1)])):(0,n.kq)("",!0),(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("p",D,[(0,n.Uk)(" Camera On: "),(0,n._)("b",null,(0,i.zw)(B.value),1)])):(0,n.kq)("",!0),(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("p",f,[(0,n.Uk)(" Last Scan: "),(0,n._)("b",null,(0,i.zw)(I.value),1)])):(0,n.kq)("",!0),(0,l.SU)(C)?((0,n.wg)(),(0,n.iD)("p",p,[(0,n.Uk)(" Camera Off: "),(0,n._)("b",null,(0,i.zw)(A.value),1)])):(0,n.kq)("",!0)],2)):(0,n.kq)("",!0)])])),_:1})}}});var k=a(9885),U=a(7691),y=a(7471),x=a(9984),q=a.n(x);const N=C,T=N;q()(C,"components",{QPage:k.Z,QChip:U.Z,QInput:y.Z})}}]);