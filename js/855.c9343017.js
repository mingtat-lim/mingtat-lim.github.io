"use strict";(globalThis["webpackChunkqr_generator"]=globalThis["webpackChunkqr_generator"]||[]).push([[855],{8855:(e,a,l)=>{l.r(a),l.d(a,{default:()=>H});var o=l(9835),n=l(6970),r=l(499),u=l(6009),t=l(2988);const s={class:"col q-pa-xl"},c={class:"error"},i={class:"row items-end",style:{width:"300px",height:"300px"}},m={key:2,class:"decode-result"},d={key:3,class:"decode-result"},v={key:4,class:"decode-result"},p={key:5,class:"decode-result"},w=!1,g=(0,o.aZ)({__name:"ScanQrCode",setup(e){const a=(0,r.iH)(),l=(0,r.iH)(),g=(0,r.iH)();function k(){let e=new Audio("/censor-beep-01.mp3");e.play()}const b=(0,r.iH)(),f=(0,r.iH)(),y=(0,r.iH)("off"),h=(0,r.iH)();function S(e){w&&console.log("onDetect",e);const o=e,[n]=o;let r;if(w&&console.log(n.rawValue),n.rawValue.startsWith("{")){const e=JSON.parse(n.rawValue);e.name=decodeURIComponent(e.name+""),a.value=e.volunteerNo,l.value=e.name,g.value=e.phoneNo,r=JSON.stringify(e)}else r=n.rawValue;f.value=r,k(),h.value=t.ou.now().toISO(),C()}let H;const q=(0,r.iH)(),V=(0,r.iH)();function C(){clearTimeout(H),H=setTimeout((()=>{w&&console.log("cameraOffTimer"),_(),V.value=t.ou.now().toISO()}),1e4)}function N(){w&&console.log("onCameraHandler"),y.value="auto",q.value=t.ou.now().toISO(),h.value="",V.value="",C()}function _(){w&&console.log("offCameraHandler"),y.value="off"}function T(e){w&&console.log("onErrorHandler",e),b.value=`[${e.name}]: `,"NotAllowedError"===e.name?b.value+="you need to grant camera access permission":"NotFoundError"===e.name?b.value+="no camera on this device":"NotSupportedError"===e.name?b.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?b.value+="is the camera already in use?":"OverconstrainedError"===e.name?b.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?b.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?b.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":b.value+=e.message}return(e,t)=>{const k=(0,o.up)("q-btn"),H=(0,o.up)("q-input"),C=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(C,{class:"row"},{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o._)("p",c,(0,n.zw)(b.value),1),(0,o._)("div",i,["auto"===y.value?((0,o.wg)(),(0,o.j4)((0,r.SU)(u.vG),{key:0,onDetect:S,onError:T,camera:y.value},null,8,["camera"])):(0,o.kq)("",!0)]),"off"===y.value?((0,o.wg)(),(0,o.j4)(k,{key:0,color:"primary",label:"Start Scan",onClick:N})):(0,o.kq)("",!0),"auto"===y.value?((0,o.wg)(),(0,o.j4)(k,{key:1,color:"primary",label:"Pause Scan",onClick:_})):(0,o.kq)("",!0),(0,o.Wm)(H,{modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=e=>a.value=e),label:"Volunteer Number",readonly:"",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o.Wm)(H,{modelValue:l.value,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value=e),label:"Name Chinese Name",readonly:"",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),(0,o.Wm)(H,{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=e=>g.value=e),label:"Phone",readonly:"",rules:[e=>!!e||"Field cannot be empty"]},null,8,["modelValue","rules"]),w?((0,o.wg)(),(0,o.iD)("p",m,[(0,o.Uk)(" Last result: "),(0,o._)("b",null,(0,n.zw)(f.value),1)])):(0,o.kq)("",!0),w?((0,o.wg)(),(0,o.iD)("p",d,[(0,o.Uk)(" Camera On: "),(0,o._)("b",null,(0,n.zw)(q.value),1)])):(0,o.kq)("",!0),w?((0,o.wg)(),(0,o.iD)("p",v,[(0,o.Uk)(" Last Scan: "),(0,o._)("b",null,(0,n.zw)(h.value),1)])):(0,o.kq)("",!0),w?((0,o.wg)(),(0,o.iD)("p",p,[(0,o.Uk)(" Camera Off: "),(0,o._)("b",null,(0,n.zw)(V.value),1)])):(0,o.kq)("",!0)])])),_:1})}}});var k=l(9885),b=l(4455),f=l(7471),y=l(9984),h=l.n(y);const S=g,H=S;h()(g,"components",{QPage:k.Z,QBtn:b.Z,QInput:f.Z})}}]);