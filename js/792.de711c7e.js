"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[792,870],{6327:(e,t,o)=>{o.r(t),o.d(t,{default:()=>ae});var a=o(1758),l=o(8790),n=o(8734),s=o(4533),r=o(9339),c=o(1868),i=o(883),d=o(1500),u=o(4907),v=o(455),b=o(9482),g=o(614),f=o(587),p=o(3537),m=o(57),k=o.n(m),h=o(1234);const R=e=>((0,a.Qi)("data-v-2ba651fa"),e=e(),(0,a.jt)(),e),y=R((()=>(0,a.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1))),_={class:"row q-pa-xs"},x={key:0,class:"fit row wrap justify-center items-start content-start"},C={class:"text-h4"},w={key:0,class:"error"},L={class:"fit row wrap justify-center items-start content-start"},q={class:"bg-blue-4",style:{width:"300px",height:"300px"}},E={class:"q-pa-md"},Q={class:"row"},A={class:"row"},F={class:"col"},S={class:"fit row wrap justify-start items-center content-start"},T=R((()=>(0,a.Lk)("div",{class:"flex-break"},null,-1))),O={class:"q-pl-sm text-h6"},X={class:"col q-pa-xs text-center"},K={key:0,class:"decode-result"},P={key:1,class:"decode-result"},W={key:2,class:"decode-result"},I={key:3,class:"decode-result"},H=(0,a.pM)({__name:"barcodeComponent",setup(e){const t=(0,n.KR)("off"),o=(0,n.KR)(),m=(0,u.A)(),R=(0,g.C)(),{settings:H}=(0,f.bP)(R),{t:D}=(0,p.s9)(),N=(0,b.n)(),V=(0,v.rd)(),j=H.value.barcodePageDebug,B=(0,n.KR)(N.barcodes),M=e=>{j&&console.log("buttonClickHandler",e),B.value.length>0&&(B.value.forEach((e=>e.expended=!1)),B.value[e].expended=!0)};M(0);const z=e=>{j&&console.log("buttonEditClickHandler",e),V.push({path:"/barcodeEdit",query:{id:e}})},J=()=>{j&&console.log("onEnd"),N.save()},$=(0,n.KR)(!1),G=(0,n.KR)(),U=(0,n.KR)(),Y=e=>{$.value=!0,G.value=Object.assign({},N.barcodes[e]),U.value=G.value.caption,j&&console.log(G.value),Z(),le(10)};function Z(){window.scrollTo(0,0)}let ee,te,oe,ae=(0,n.KR)(0);function le(e){ae.value=e,ee=setInterval((()=>{1===ae.value&&($.value=!1,clearInterval(ee)),ae.value--}),1e3)}function ne(e){te=setTimeout((()=>{e()}),5e3)}function se(e){console.log("onLeft"),ne(e.reset)}function re(e){console.log("onRight"),ne(e.reset)}function ce(e){j&&console.log("onDetect",e);const t=e,[a]=t;let l;if(j&&console.log(a.rawValue),console.log(a.rawValue),a.rawValue.startsWith("{")){const e=JSON.parse(a.rawValue);m.dialog({title:D("barcodeEdit_comfirmation_title"),message:D("barcode_import_confirmation",{name:e.caption}),cancel:{label:D("button_caption_cancel")},ok:{label:D("button_caption_yes"),push:!0},persistent:!0}).onOk((()=>{N.add(e),M(N.barcodes.length-1),m.notify({type:"positive",position:"center",message:D("barcode_notify_RecordAdded")})})).onCancel((()=>{})).onDismiss((()=>{})),l=JSON.stringify(e)}else l=a.rawValue;o.value=l,fe(),ie.value=i.c9.now().toISO(),ge()}(0,a.xo)((()=>{clearTimeout(te),clearInterval(ee)}));const ie=(0,n.KR)(),de=(0,n.KR)(),ue=(0,n.KR)();function ve(){clearTimeout(oe),oe=setTimeout((()=>{j&&console.log("cameraOffTimer"),ge(),ue.value=i.c9.now().toISO()}),1e4)}function be(){j&&console.log("onCameraHandler"),t.value="auto",de.value=i.c9.now().toISO(),ie.value="",ue.value="",ve()}function ge(){j&&console.log("offCameraHandler"),t.value="off"}function fe(){let e=new Audio("/censor-beep-01.mp3");e.play()}function pe(e,t){for(const o of e){const[e,...a]=o.cornerPoints;t.strokeStyle="red",t.beginPath(),t.moveTo(e.x,e.y);for(const{x:o,y:l}of a)t.lineTo(o,l);t.lineTo(e.x,e.y),t.closePath(),t.stroke()}}function me(e,t){for(const o of e){const{boundingBox:e}=o;t.lineWidth=2,t.strokeStyle="#007bff",t.strokeRect(e.x,e.y,e.width,e.height)}}function ke(e,t){for(const o of e){const{boundingBox:e,rawValue:a}=o,l=e.x+e.width/2,n=e.y+e.height/2,s=Math.max(12,50*e.width/t.canvas.width);t.font=`bold ${s}px sans-serif`,t.textAlign="center",t.lineWidth=3,t.strokeStyle="#35495e",t.strokeText(o.rawValue,l,n),t.fillStyle="#5cb984",t.fillText(a,l,n)}}const he=[{text:"nothing (default)",value:void 0},{text:"outline",value:pe},{text:"centered text",value:ke},{text:"bounding box",value:me}],Re=(0,n.KR)(he[1]),ye=(0,n.KR)({facingMode:"environment"});let _e;_e=["qr_code","ean_13","unknown"];const xe=(0,n.KR)("");function Ce(e){j&&console.log("onErrorHandler",e),xe.value=`[${e.name}]: `,"NotAllowedError"===e.name?xe.value+="you need to grant camera access permission":"NotFoundError"===e.name?xe.value+="no camera on this device":"NotSupportedError"===e.name?xe.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?xe.value+="is the camera already in use?":"OverconstrainedError"===e.name?xe.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?xe.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?xe.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":xe.value+=e.message}const we=e=>{j&&console.log("onDeleteButtonClick"),m.dialog({title:D("barcodeEdit_comfirmation_title"),message:D("barcodeEdit_delete_confirmation"),cancel:{label:D("button_caption_cancel"),push:!0},ok:{label:D("button_caption_delete")},persistent:!0}).onOk((()=>{N.delete(e),m.notify({type:"positive",position:"center",message:D("barcodeEdit_notify_RecordDeleted")}),V.push("/barcode")})).onCancel((()=>{})).onDismiss((()=>{}))};return(e,i)=>{const u=(0,a.g2)("q-btn"),v=(0,a.g2)("q-item"),b=(0,a.g2)("q-slide-item"),g=(0,a.g2)("q-list"),f=(0,a.g2)("q-card-section"),p=(0,a.g2)("q-separator"),m=(0,a.g2)("q-card-actions"),R=(0,a.g2)("q-card");return(0,a.uX)(),(0,a.CE)("div",null,[y,(0,a.Lk)("div",_,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"blue",icon:"barcode_reader",round:"",onClick:i[0]||(i[0]=e=>be())})],2),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col text-h3 text-center text-capitalize","bg-yellow-3"))},(0,l.v_)("barcode"===(0,n.R1)(H).type?(0,n.R1)(D)("barcode_title"):(0,n.R1)(D)("qrcode_title")),3),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"green",icon:"add",round:"",onClick:i[1]||(i[1]=e=>z(-1))})],2)]),$.value?((0,a.uX)(),(0,a.CE)("div",x,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"q-pa-xs text-center","bg-red-3"))},[(0,a.Lk)("div",C,(0,l.v_)(U.value)+" - "+(0,l.v_)((0,n.R1)(ae)),1),(0,a.bF)((0,n.R1)(c.Ay),{value:JSON.stringify(G.value,null,4),type:"image/png",width:300,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])):(0,a.Q3)("",!0),"auto"===t.value?((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"q-pa-xs text-center","bg-red-3"))},[xe.value?((0,a.uX)(),(0,a.CE)("div",w,(0,l.v_)(xe.value),1)):(0,a.Q3)("",!0),(0,a.Lk)("div",L,[(0,a.Lk)("div",q,[(0,a.bF)((0,n.R1)(d.tR),{onDetect:ce,onError:Ce,track:Re.value.value,constraints:ye.value,formats:(0,n.R1)(_e),camera:t.value},null,8,["track","constraints","formats","camera"])])])],2)):(0,a.Q3)("",!0),(0,a.Lk)("div",E,[(0,a.bF)((0,n.R1)(k()),{tag:"span",list:B.value,class:"list-group",handle:".handle","item-key":"caption",onEnd:J},{item:(0,a.k6)((({element:e,index:t})=>[(0,a.Lk)("div",null,[(0,a.bF)(R,{class:"my-card q-mb-md"},{default:(0,a.k6)((()=>[(0,a.bF)(f,{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"q-pa-none","bg-blue-6 text-white"))},{default:(0,a.k6)((()=>[(0,a.bF)(g,null,{default:(0,a.k6)((()=>[(0,a.bF)(b,{onLeft:se,onRight:re,"left-color":"blue-3","right-color":"blue-3"},{left:(0,a.k6)((()=>[(0,a.Lk)("div",Q,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"red",icon:"delete",round:"",onClick:e=>we(t),class:"q-mr-md"},null,8,["onClick"])],2),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col text-h5  text-center text-capitalize","bg-blue-3"))},(0,l.v_)(e.caption),3)])])),right:(0,a.k6)((()=>[(0,a.Lk)("div",A,[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col text-h5 text-center text-capitalize q-mr-md","bg-blue-3"))},(0,l.v_)(e.caption),3),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,a.bF)(u,{color:"blue",icon:"share",round:"",onClick:e=>Y(t),class:"q-mr-md"},null,8,["onClick"]),(0,a.bF)(u,{color:"green",icon:"edit",round:"",onClick:e=>z(t)},null,8,["onClick"])],2)])])),default:(0,a.k6)((()=>[(0,a.bF)(v,{class:"q-pa-none"},{default:(0,a.k6)((()=>[(0,a.Lk)("div",F,[(0,a.Lk)("div",S,[(0,a.bF)(u,{flat:"","text-color":"green",icon:"drag_handle",class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"handle","bg-blue-2"))},null,8,["class"]),(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"text-h5 col-grow self-stretch","bg-blue-3")),style:{overflow:"auto"}},(0,l.v_)(e.caption)+" "+(0,l.v_)(void 0!==e.phone?e.phone.substring(0,4):"")+" "+(0,l.v_)(void 0!==e.phone?e.phone.substring(4):""),3),T,(0,a.Lk)("div",O,(0,l.v_)(e.barcode),1)])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),(0,a.bF)(p),e.expended?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(m,{key:0,class:"q-pa-none",align:"right"},{default:(0,a.k6)((()=>[(0,a.bF)(u,{flat:"","no-caps":"",onClick:e=>M(t)},{default:(0,a.k6)((()=>[(0,a.eW)((0,l.v_)("barcode"===(0,n.R1)(H).type?(0,n.R1)(D)("barcode_showBarcode"):(0,n.R1)(D)("barcode_showQrcode")),1)])),_:2},1032,["onClick"])])),_:2},1024)),e.expended&&"barcode"===(0,n.R1)(H).type?((0,a.uX)(),(0,a.Wv)(f,{key:1,class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",X,[(0,a.bF)((0,n.R1)(r.f),{value:e.barcode,width:2,height:80},null,8,["value"])])])),_:2},1032,["class"])):(0,a.Q3)("",!0),e.expended&&"qrcode"===(0,n.R1)(H).type?((0,a.uX)(),(0,a.Wv)(f,{key:2,class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"row q-pa-none","bg-green-3 text-white"))},{default:(0,a.k6)((()=>[(0,a.Lk)("div",{class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"q-pa-xs col text-center","bg-red-3"))},[(0,a.bF)((0,n.R1)(c.Ay),{value:e.barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:2},1032,["class"])):(0,a.Q3)("",!0)])),_:2},1024)])])),_:1},8,["list"])]),(0,n.R1)(H).barcodePageDebug?((0,a.uX)(),(0,a.Wv)(h.A,{key:2,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,n.R1)(N).barcodes,title:"db settings"},null,8,["value"])):(0,a.Q3)("",!0),(0,n.R1)(j)?((0,a.uX)(),(0,a.CE)("div",{key:3,class:(0,l.C4)((0,n.R1)(s.y)((0,n.R1)(j),"","bg-yellow-2"))},[(0,n.R1)(j)?((0,a.uX)(),(0,a.CE)("p",K,[(0,a.eW)(" Last result: "),(0,a.Lk)("b",null,(0,l.v_)(o.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(j)?((0,a.uX)(),(0,a.CE)("p",P,[(0,a.eW)(" Camera On: "),(0,a.Lk)("b",null,(0,l.v_)(de.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(j)?((0,a.uX)(),(0,a.CE)("p",W,[(0,a.eW)(" Last Scan: "),(0,a.Lk)("b",null,(0,l.v_)(ie.value),1)])):(0,a.Q3)("",!0),(0,n.R1)(j)?((0,a.uX)(),(0,a.CE)("p",I,[(0,a.eW)(" Camera Off: "),(0,a.Lk)("b",null,(0,l.v_)(ue.value),1)])):(0,a.Q3)("",!0)],2)):(0,a.Q3)("",!0)])}}});var D=o(2807),N=o(1693),V=o(3316),j=o(4189),B=o(3999),M=o(7753),z=o(124),J=o(386),$=o(2669),G=o(8582),U=o.n(G);const Y=(0,D.A)(H,[["__scopeId","data-v-2ba651fa"]]),Z=Y;U()(H,"components",{QBtn:N.A,QCard:V.A,QCardSection:j.A,QList:B.A,QSlideItem:M.A,QItem:z.A,QSeparator:J.A,QCardActions:$.A});const ee=(0,a.pM)(Object.assign({name:"BarcodePage"},{__name:"barcodePage",setup(e){return(e,t)=>{const o=(0,a.g2)("q-page");return(0,a.uX)(),(0,a.Wv)(o,null,{default:(0,a.k6)((()=>[(0,a.bF)(Z)])),_:1})}}}));var te=o(7716);const oe=ee,ae=oe;U()(ee,"components",{QPage:te.A})}}]);