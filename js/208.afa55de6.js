"use strict";(globalThis["webpackChunkquasar_barcode"]=globalThis["webpackChunkquasar_barcode"]||[]).push([[208,493],{2532:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});var l=a(1347),o=a(7763),n=a(4187),s=a(8677),r=a(4144),c=a(1868),i=a(296),d=a(6179),u=a(3022),v=a(455),b=a(5887),g=a(7047),f=a(6305),p=a(2291),k=a(5686),R=a.n(k),m=a(8234);const h={class:"row q-pa-xs"},y={key:0,class:"fit row wrap justify-center items-start content-start"},x={class:"text-h4"},_={key:0,class:"error"},C={class:"fit row wrap justify-center items-start content-start"},w={class:"bg-blue-4",style:{width:"300px",height:"300px"}},L={key:2,class:"q-pa-md"},q={class:"row"},F={class:"col"},E={class:"fit row wrap justify-start items-center content-start"},Q={class:"text-h5 q-pr-xs"},A={class:"q-pl-sm text-h6"},S={class:"col q-pr-xs text-right"},T={class:"q-pl-sm text-h6"},X={class:"col q-pa-xs text-center"},W={class:"q-pa-md"},K={key:0},O={class:"row"},P={class:"row"},I={class:"col"},H={class:"fit row wrap justify-start items-center content-start"},D={class:"text-h5"},N={class:"q-pl-sm text-h6"},z={class:"col q-pr-xs text-right"},B={class:"q-pl-sm text-h6"},V={class:"col q-pa-xs text-center"},M={key:0,class:"decode-result"},j={key:1,class:"decode-result"},J={key:2,class:"decode-result"},U={key:3,class:"decode-result"},$=(0,l.pM)({__name:"barcodeComponent",setup(e){const t=(0,n.KR)("off"),a=(0,n.KR)(),k=(0,u.A)(),$=(0,g.C)(),{settings:G}=(0,f.bP)($),{t:Y}=(0,p.s9)(),Z=(0,b.n)(),ee=(0,v.rd)(),te=G.value.barcodePageDebug,ae=(0,n.KR)(Z.barcodes),[le,...oe]=ae.value,ne=e=>{te&&console.log("buttonClickHandler",e),ae.value.length>0&&(ae.value.forEach((e=>e.expended=!1)),ae.value[e].expended=!0)};ne(0);const se=e=>{if("en-US"!==G.value.locale)return e;switch(e){case"东":return"E";case"中":return"C";case"北":return"N";case"南":return"S";default:return e}},re=e=>{te&&console.log("buttonEditClickHandler",e),ee.push({path:"/barcodeEdit",query:{id:e}})},ce=()=>{te&&console.log("onEnd"),Z.save()},ie=(0,n.KR)(!1),de=(0,n.KR)(),ue=(0,n.KR)(),ve=e=>{ie.value=!0,de.value={...Z.barcodes[e]},ue.value=de.value.caption,te&&console.log(de.value),be(),Re(10)};function be(){window.scrollTo(0,0)}let ge,fe,pe,ke=(0,n.KR)(0);function Re(e){ke.value=e,ge=setInterval((()=>{1===ke.value&&(ie.value=!1,clearInterval(ge)),ke.value--}),1e3)}function me(e){fe=setTimeout((()=>{e()}),5e3)}function he(e){console.log("onLeft"),me(e.reset)}function ye(e){console.log("onRight"),me(e.reset)}function xe(e){te&&console.log("onDetect",e);const t=e,[l]=t;let o;if(te&&console.log(l.rawValue),console.log(l.rawValue),l.rawValue.startsWith("{")){const e=JSON.parse(l.rawValue);k.dialog({title:Y("barcodeEdit_comfirmation_title"),message:Y("barcode_import_confirmation",{name:e.caption}),cancel:{label:Y("button_caption_cancel")},ok:{label:Y("button_caption_yes"),push:!0},persistent:!0}).onOk((()=>{Z.add(e),ne(Z.barcodes.length-1),k.notify({type:"positive",position:"center",message:Y("barcode_notify_RecordAdded")})})).onCancel((()=>{})).onDismiss((()=>{})),o=JSON.stringify(e)}else o=l.rawValue;a.value=o,Ee(),_e.value=i.c9.now().toISO(),Fe()}(0,l.xo)((()=>{clearTimeout(fe),clearInterval(ge)}));const _e=(0,n.KR)(),Ce=(0,n.KR)(),we=(0,n.KR)();function Le(){clearTimeout(pe),pe=setTimeout((()=>{te&&console.log("cameraOffTimer"),Fe(),we.value=i.c9.now().toISO()}),1e4)}function qe(){te&&console.log("onCameraHandler"),t.value="auto",Ce.value=i.c9.now().toISO(),_e.value="",we.value="",Le()}function Fe(){te&&console.log("offCameraHandler"),t.value="off"}function Ee(){let e=new Audio("/censor-beep-01.mp3");e.play()}function Qe(e,t){for(const a of e){const[e,...l]=a.cornerPoints;t.strokeStyle="red",t.beginPath(),t.moveTo(e.x,e.y);for(const{x:e,y:a}of l)t.lineTo(e,a);t.lineTo(e.x,e.y),t.closePath(),t.stroke()}}function Ae(e,t){for(const a of e){const{boundingBox:e}=a;t.lineWidth=2,t.strokeStyle="#007bff",t.strokeRect(e.x,e.y,e.width,e.height)}}function Se(e,t){for(const a of e){const{boundingBox:e,rawValue:l}=a,o=e.x+e.width/2,n=e.y+e.height/2,s=Math.max(12,50*e.width/t.canvas.width);t.font=`bold ${s}px sans-serif`,t.textAlign="center",t.lineWidth=3,t.strokeStyle="#35495e",t.strokeText(a.rawValue,o,n),t.fillStyle="#5cb984",t.fillText(l,o,n)}}const Te=[{text:"nothing (default)",value:void 0},{text:"outline",value:Qe},{text:"centered text",value:Se},{text:"bounding box",value:Ae}],Xe=(0,n.KR)(Te[1]),We=(0,n.KR)({facingMode:"environment"});let Ke;Ke=["qr_code","ean_13","unknown"];const Oe=(0,n.KR)("");function Pe(e){te&&console.log("onErrorHandler",e),Oe.value=`[${e.name}]: `,"NotAllowedError"===e.name?Oe.value+="you need to grant camera access permission":"NotFoundError"===e.name?Oe.value+="no camera on this device":"NotSupportedError"===e.name?Oe.value+="secure context required (HTTPS, localhost)":"NotReadableError"===e.name?Oe.value+="is the camera already in use?":"OverconstrainedError"===e.name?Oe.value+="installed cameras are not suitable":"StreamApiNotSupportedError"===e.name?Oe.value+="Stream API is not supported in this browser":"InsecureContextError"===e.name?Oe.value+="Camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP.":Oe.value+=e.message}const Ie=e=>{te&&console.log("onDeleteButtonClick"),k.dialog({title:Y("barcodeEdit_comfirmation_title"),message:Y("barcodeEdit_delete_confirmation"),cancel:{label:Y("button_caption_cancel"),push:!0},ok:{label:Y("button_caption_delete")},persistent:!0}).onOk((()=>{Z.delete(e),k.notify({type:"positive",position:"center",message:Y("barcodeEdit_notify_RecordDeleted")}),ee.push("/barcode")})).onCancel((()=>{})).onDismiss((()=>{}))};return(e,i)=>{const u=(0,l.g2)("q-btn"),v=(0,l.g2)("q-item"),b=(0,l.g2)("q-slide-item"),g=(0,l.g2)("q-list"),f=(0,l.g2)("q-card-section"),p=(0,l.g2)("q-separator"),k=(0,l.g2)("q-card-actions"),$=(0,l.g2)("q-card");return(0,l.uX)(),(0,l.CE)("div",null,[i[11]||(i[11]=(0,l.Lk)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0"},null,-1)),(0,l.Lk)("div",h,[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,l.bF)(u,{color:"blue",icon:"barcode_reader",round:"",onClick:i[0]||(i[0]=e=>qe())})],2),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col text-h3 text-center text-capitalize","bg-yellow-3"))},(0,o.v_)("barcode"===(0,n.R1)(G).type?(0,n.R1)(Y)("barcode_title"):(0,n.R1)(Y)("qrcode_title")),3),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col-md-auto q-pa-sm x-v-align-middle","bg-red-3"))},[(0,l.bF)(u,{color:"green",icon:"add",round:"",onClick:i[1]||(i[1]=e=>re(-1))})],2)]),ie.value?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-xs text-center","bg-red-3"))},[(0,l.Lk)("div",x,(0,o.v_)(ue.value)+" - "+(0,o.v_)((0,n.R1)(ke)),1),(0,l.bF)((0,n.R1)(c.Ay),{value:JSON.stringify(de.value,null,4),type:"image/png",width:300,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])):(0,l.Q3)("",!0),"auto"===t.value?((0,l.uX)(),(0,l.CE)("div",{key:1,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-xs text-center","bg-red-3"))},[Oe.value?((0,l.uX)(),(0,l.CE)("div",_,(0,o.v_)(Oe.value),1)):(0,l.Q3)("",!0),(0,l.Lk)("div",C,[(0,l.Lk)("div",w,[(0,l.bF)((0,n.R1)(d.tR),{onDetect:xe,onError:Pe,track:Xe.value.value,constraints:We.value,formats:(0,n.R1)(Ke),camera:t.value},null,8,["track","constraints","formats","camera"])])])],2)):(0,l.Q3)("",!0),(0,n.R1)(le)?((0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",null,[(0,l.bF)($,{class:"my-card"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-none","bg-blue-6 text-white"))},{default:(0,l.k6)((()=>[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(b,{onLeft:he,onRight:ye,"left-color":"blue-3","right-color":"blue-3"},{right:(0,l.k6)((()=>[(0,l.Lk)("div",q,[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col text-h5 text-center text-capitalize q-mr-md","bg-blue-3"))},(0,o.v_)((0,n.R1)(le).caption),3),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,l.bF)(u,{color:"blue",icon:"share",round:"",onClick:i[2]||(i[2]=e=>ve(0)),class:"q-mr-md"}),(0,l.bF)(u,{color:"green",icon:"edit",round:"",onClick:i[3]||(i[3]=e=>re(0))})],2)])])),default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"q-pa-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",F,[(0,l.Lk)("div",E,[(0,l.bF)(u,{flat:"","text-color":"green",icon:"drag_handle",class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"handle","bg-blue-2"))},null,8,["class"]),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"text-h5 col-grow self-stretch","bg-blue-3")),style:{overflow:"auto"}},(0,o.v_)((0,n.R1)(le).caption),3),(0,l.Lk)("div",Q,(0,o.v_)(void 0!==(0,n.R1)(le).phone?(0,n.R1)(le).phone.substring(0,4):"")+" "+(0,o.v_)(void 0!==(0,n.R1)(le).phone?(0,n.R1)(le).phone.substring(4):""),1),i[5]||(i[5]=(0,l.Lk)("div",{class:"flex-break"},null,-1)),(0,l.Lk)("div",A,(0,o.v_)((0,n.R1)(le).barcode),1),(0,l.Lk)("div",S,[(0,l.Lk)("div",T,(0,o.v_)((0,n.R1)(le).region)+(0,o.v_)((0,n.R1)(le).zone)+(0,o.v_)((0,n.R1)(le).team),1)])])])])),_:1})])),_:1})])),_:1})])),_:1},8,["class"]),(0,l.bF)(p),(0,n.R1)(le).expended?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(k,{key:0,class:"q-pa-none",align:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{flat:"","no-caps":"",onClick:i[4]||(i[4]=e=>ne(0))},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)("barcode"===(0,n.R1)(G).type?(0,n.R1)(Y)("barcode_showBarcode"):(0,n.R1)(Y)("barcode_showQrcode")),1)])),_:1})])),_:1})),(0,n.R1)(le).expended&&"barcode"===(0,n.R1)(G).type?((0,l.uX)(),(0,l.Wv)(f,{key:1,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"row q-pa-none","bg-green-3 text-white"))},{default:(0,l.k6)((()=>[(0,l.Lk)("div",X,[(0,l.bF)((0,n.R1)(r.f),{value:(0,n.R1)(le).barcode,width:2,height:80},null,8,["value"])])])),_:1},8,["class"])):(0,l.Q3)("",!0),(0,n.R1)(le).expended&&"qrcode"===(0,n.R1)(G).type?((0,l.uX)(),(0,l.Wv)(f,{key:2,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"row q-pa-none","bg-green-3 text-white"))},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-xs col text-center","bg-red-3"))},[(0,l.bF)((0,n.R1)(c.Ay),{value:(0,n.R1)(le).barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:1},8,["class"])):(0,l.Q3)("",!0)])),_:1})])])):(0,l.Q3)("",!0),(0,l.Lk)("div",W,[(0,l.bF)((0,n.R1)(R()),{tag:"span",list:ae.value,class:"list-group",handle:".handle","item-key":"caption",onEnd:ce},{item:(0,l.k6)((({element:e,index:t})=>[t>0?((0,l.uX)(),(0,l.CE)("div",K,[(0,l.bF)($,{class:"my-card q-mb-md"},{default:(0,l.k6)((()=>[(0,l.bF)(f,{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-none","bg-blue-6 text-white"))},{default:(0,l.k6)((()=>[(0,l.bF)(g,null,{default:(0,l.k6)((()=>[(0,l.bF)(b,{onLeft:he,onRight:ye,"left-color":"blue-3","right-color":"blue-3"},{left:(0,l.k6)((()=>[(0,l.Lk)("div",O,[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,l.bF)(u,{color:"red",icon:"delete",round:"",onClick:e=>Ie(t),class:"q-mr-md"},null,8,["onClick"])],2),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col text-h5  text-center text-capitalize","bg-blue-3"))},(0,o.v_)(e.caption),3)])])),right:(0,l.k6)((()=>[(0,l.Lk)("div",P,[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col text-h5 text-center text-capitalize q-mr-md","bg-blue-3"))},(0,o.v_)(e.caption),3),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"col-md-auto x-v-align-middle","bg-red-3"))},[(0,l.bF)(u,{color:"green",icon:"edit",round:"",onClick:e=>re(t)},null,8,["onClick"])],2)])])),default:(0,l.k6)((()=>[(0,l.bF)(v,{class:"q-pa-none"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",I,[(0,l.Lk)("div",H,[(0,l.bF)(u,{flat:"","text-color":"green",icon:"drag_handle",class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"handle","bg-blue-2"))},null,8,["class"]),(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"text-h5 col-grow self-stretch","bg-blue-3")),style:{overflow:"auto"}},(0,o.v_)(e.caption),3),(0,l.Lk)("div",D,(0,o.v_)(void 0!==e.phone?e.phone.substring(0,4):"")+" "+(0,o.v_)(void 0!==e.phone?e.phone.substring(4):""),1),i[6]||(i[6]=(0,l.Lk)("div",{class:"flex-break"},null,-1)),(0,l.Lk)("div",N,(0,o.v_)(e.barcode),1),(0,l.Lk)("div",z,[(0,l.Lk)("div",B,(0,o.v_)(se(e.region))+(0,o.v_)(e.zone)+(0,o.v_)(e.team),1)])])])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),(0,l.bF)(p),e.expended?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(k,{key:0,class:"q-pa-none",align:"right"},{default:(0,l.k6)((()=>[(0,l.bF)(u,{flat:"","no-caps":"",onClick:e=>ne(t)},{default:(0,l.k6)((()=>[(0,l.eW)((0,o.v_)("barcode"===(0,n.R1)(G).type?(0,n.R1)(Y)("barcode_showBarcode"):(0,n.R1)(Y)("barcode_showQrcode")),1)])),_:1},8,["onClick"])])),_:2},1024)),e.expended&&"barcode"===(0,n.R1)(G).type?((0,l.uX)(),(0,l.Wv)(f,{key:1,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"row q-pa-none","bg-green-3 text-white"))},{default:(0,l.k6)((()=>[(0,l.Lk)("div",V,[(0,l.bF)((0,n.R1)(r.f),{value:e.barcode,width:2,height:80},null,8,["value"])])])),_:2},1032,["class"])):(0,l.Q3)("",!0),e.expended&&"qrcode"===(0,n.R1)(G).type?((0,l.uX)(),(0,l.Wv)(f,{key:2,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"row q-pa-none","bg-green-3 text-white"))},{default:(0,l.k6)((()=>[(0,l.Lk)("div",{class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"q-pa-xs col text-center","bg-red-3"))},[(0,l.bF)((0,n.R1)(c.Ay),{value:e.barcode,type:"image/png",width:200,color:{dark:"#000000ff",light:"#ffffffff"},errorCorrectionLevel:"H",margin:1},null,8,["value"])],2)])),_:2},1032,["class"])):(0,l.Q3)("",!0)])),_:2},1024)])):(0,l.Q3)("",!0)])),_:1},8,["list"])]),(0,n.R1)(G).barcodePageDebug?((0,l.uX)(),(0,l.Wv)(m.A,{key:3,class:"col-3 q-pa-md items-start q-gutter-md",value:(0,n.R1)(Z).barcodes,title:"db settings"},null,8,["value"])):(0,l.Q3)("",!0),(0,n.R1)(te)?((0,l.uX)(),(0,l.CE)("div",{key:4,class:(0,o.C4)((0,n.R1)(s.y)((0,n.R1)(te),"","bg-yellow-2"))},[(0,n.R1)(te)?((0,l.uX)(),(0,l.CE)("p",M,[i[7]||(i[7]=(0,l.eW)(" Last result: ",-1)),(0,l.Lk)("b",null,(0,o.v_)(a.value),1)])):(0,l.Q3)("",!0),(0,n.R1)(te)?((0,l.uX)(),(0,l.CE)("p",j,[i[8]||(i[8]=(0,l.eW)(" Camera On: ",-1)),(0,l.Lk)("b",null,(0,o.v_)(Ce.value),1)])):(0,l.Q3)("",!0),(0,n.R1)(te)?((0,l.uX)(),(0,l.CE)("p",J,[i[9]||(i[9]=(0,l.eW)(" Last Scan: ",-1)),(0,l.Lk)("b",null,(0,o.v_)(_e.value),1)])):(0,l.Q3)("",!0),(0,n.R1)(te)?((0,l.uX)(),(0,l.CE)("p",U,[i[10]||(i[10]=(0,l.eW)(" Camera Off: ",-1)),(0,l.Lk)("b",null,(0,o.v_)(we.value),1)])):(0,l.Q3)("",!0)],2)):(0,l.Q3)("",!0)])}}});var G=a(2968),Y=a(9039),Z=a(3341),ee=a(222),te=a(3766),ae=a(5073),le=a(2589),oe=a(6915),ne=a(5034),se=a(272),re=a.n(se);const ce=(0,G.A)($,[["__scopeId","data-v-88bca65e"]]),ie=ce;re()($,"components",{QBtn:Y.A,QCard:Z.A,QCardSection:ee.A,QList:te.A,QSlideItem:ae.A,QItem:le.A,QSeparator:oe.A,QCardActions:ne.A});const de=(0,l.pM)({name:"BarcodePage",__name:"barcodePage",setup(e){return(e,t)=>{const a=(0,l.g2)("q-page");return(0,l.uX)(),(0,l.Wv)(a,null,{default:(0,l.k6)((()=>[(0,l.bF)(ie)])),_:1})}}});var ue=a(5013);const ve=de,be=ve;re()(de,"components",{QPage:ue.A})}}]);